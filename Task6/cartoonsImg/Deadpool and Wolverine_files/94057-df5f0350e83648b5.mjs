(self.modernJsonp=self.modernJsonp||[]).push([["94057"],{731462:function(e,t,i){i.d(t,{Z:()=>a});var s=i(281098),n=i(667294),r=i(20256),o=i(947050),l=i(785893);let a=({animationData:e})=>{(0,n.useEffect)(()=>{(0,s.Z)("HeaderIconLottie","/app/common/react/components/growth/news/NewsHub/HeaderIcon/HeaderIconLottie.tsx")},[]);let{animationContainerRef:t}=(0,o.Z)({animationData:e,loop:!0,autoplay:!0});return(0,n.useMemo)(()=>(0,l.jsx)(r.xu,{ref:t,"data-testid":"lottie-header-icon",height:"100%",left:!0,position:"absolute",top:!0,width:"100%"}),[t])||null}},777939:function(e,t,i){i.d(t,{Q2:()=>l,Wy:()=>c,Y0:()=>o,_Z:()=>a,fK:()=>d});var s=i(410156),n=i(686319),r=i(670622);let o=(e,t)=>t.some(t=>e&1<<t),l=({lastUpdatedAt:e})=>{let t=(0,r.Z)(),i=new Date(e);return new Date().getTime()-i.getTime()>s.F4&&i.setHours(0,0,0,0),` ${t(i,!0)}`};function a(e,t){return(0,n.Z)({url:`/v3/news_hub/${e}/fatigue/${t}/`,method:"POST"})}function d(e,t){return(0,n.Z)({url:`/v3/news_hub/${e}/fatigue/${t}/`,method:"DELETE"})}function c(e,t){return(0,n.Z)({url:"/v3/news_hub/hide/batch/",method:"PUT",data:{news_ids:[e],should_hide:t}})}},61063:function(e,t,i){i.d(t,{Z:()=>s});function s(e,t){let i=new Date,s=new Date(e);return i.getTime()-s.getTime()>864e5&&s.setHours(0,0,0,0),t(s.toString(),!0)}},628708:function(e,t,i){i.d(t,{Z:()=>u});var s=i(667294),n=i(980787),r=i(821342),o=i(510928),l=i(776777),a=i(785893);function d(e,t,i){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:s+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let c=(0,o.Z)()&&(0,o.Z)().debug_impression_log,h={Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},Story:{impressionType:"storyImpression",idType:"idStr",eventType:170},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573},ActivationCard:{impressionType:"activationCardImpressions",idType:"experienceIdStr",eventType:8547},Banner:{impressionType:"bannerImpressions",idType:"userIdStr",eventType:9061}};function u(e){class t extends s.Component{constructor(...e){super(...e),d(this,"currentNs",()=>1e6*Date.now()),d(this,"startTime",0),d(this,"debugPinImpressions",c&&"Pin"===this.props.impressionType&&this.props.viewer.isAuth&&this.props.viewer.isEmployee),d(this,"handleVisibilityChanged",e=>{let{componentType:t,contextLogData:i,impressionAuxFields:s,impressionType:n,loggingId:r,slotIndex:o,viewParameter:l,viewType:a,viewData:d,logContextEvent:c}=this.props;if(e)this.startTime=this.currentNs(),this.debugPinImpressions&&console.log(o+" started timer");else{let e=h[n],u=e.idType,p=this.currentNs(),_={endTime:p,[u]:r,slotIndex:o,time:this.startTime,renderDuration:p-this.startTime,...s};c({event_type:e.eventType,component:t,event_data:{[e.impressionType]:[_]},view_type:a,view_parameter:l,view_data:d,aux_data:{...i}}),this.debugPinImpressions&&console.log(o+" logged for "+(p-this.startTime)/1e9+"s")}})}render(){return(0,a.jsx)(l.Z,{onVisibilityChanged:this.handleVisibilityChanged,...this.props,children:(0,a.jsx)(e,{...this.props})})}}return function(e){let{logContextEvent:i}=(0,n.u)(),s=(0,r.Z)();return(0,a.jsx)(t,{...e,logContextEvent:i,viewer:s})}}},2929:function(e,t,i){function s(e){return e===window?window.innerHeight:e.clientHeight}function n(){return void 0!==window.scrollY?window.scrollY:document.documentElement&&void 0!==document.documentElement.scrollTop?document.documentElement.scrollTop:0}function r(e){return e===window&&document.documentElement?document.documentElement.scrollHeight:e.scrollHeight}function o(e){return e===window?n():e.scrollTop}function l(){window&&window.scroll(0,0)}i.d(t,{MX:()=>o,S$:()=>n,Uy:()=>s,aZ:()=>r,vM:()=>l})},776777:function(e,t,i){i.d(t,{Z:()=>a});var s=i(281098),n=i(667294),r=i(20256),o=i(331854),l=i(785893);function a({onVisibilityChanged:e,children:t,...i}){(0,n.useEffect)(()=>{(0,s.Z)("VisibilityChangedWrapper","/app/packages/useVisibilityChanged/VisibilityChangedWrapper.tsx")},[]);let a=(0,o.Z)({onVisibilityChanged:e,...i});return(0,l.jsx)(r.xu,{ref:a,children:t})}},331854:function(e,t,i){i.d(t,{Z:()=>l});var s=i(667294);let n=new Map,r=null,o=e=>{e.forEach(e=>{let t=n.get(e.target);t&&t(e)})};function l({onVisibilityChanged:e,trackFullVisible:t,rootMargin:i}){let l=(0,s.useRef)(null),a=!1,d=()=>{let t;l.current instanceof HTMLElement&&(t=l.current,n.has(t))&&a&&(e(!1),a=!1)},c=(0,s.useCallback)(i=>{l.current instanceof HTMLElement&&((e,t="-64px 0px 0px 0px",i)=>{let s={root:"undefined"==typeof document?null:document.querySelector("#mainContainer"),rootMargin:t,threshold:[0,.5,1]};r=r||new window.IntersectionObserver(o,s),n.set(e,i),r.observe(e)})(l.current,i,i=>{if(!n.has(l.current))return;let s=t?i.intersectionRatio>=1:i.intersectionRatio>=.5,r=t?0===i.intersectionRatio:!s;!a&&s?(a=i.intersectionRatio>0||i.isIntersecting)&&e(!0):a&&r&&d()})},[l.current]);return(0,s.useEffect)(()=>(c(i),()=>{if(l.current instanceof HTMLElement){var e;d(),e=l.current,r.unobserve(e),n.delete(e)}}),[c]),l}},866370:function(e,t,i){i.d(t,{IR:()=>a,J7:()=>o,L3:()=>d,Ri:()=>h,ZP:()=>u,ZR:()=>c,rC:()=>l,v9:()=>r});var s=i(20256);let n=new s.Ry(999),r=new s.H3([n]),o=new s.H3([n]),l=new s.H3([n]),a=new s.Ry(20),d=new s.Ry(20),c="324px",h=e=>()=>{e({event_type:101,view_type:412,element:13562})},u={setSterlingBodyStyles:()=>{let e="allWhitePage",t="slimWidth";if(document.documentElement&&(document.documentElement.className+=` ${e}`),document.body){document.body.classList.contains(e)||document.body.classList.add(e);let i=document.querySelector(".AppSterling");i&&(i.classList.contains(e)||i.classList.add(e),i.classList.contains(t)||i.classList.add(t))}},MODAL_Z_INDEX:9999,BULK_EDITOR_HISTORY_Z_INDEX:9998,SIDEBAR_Z_INDEX:500,BULK_HEADER_HEIGHT_OFFSET:145,BULK_HEADER_Z_INDEX:2,BILLING_HEADER_HEIGHT_OFFSET:145,ANALYTICS_HELP_BUTTON_ZINDEX:10,STERLING_HEADER_HEIGHT_OFFSET:100,MAX_SIDEBAR_HEIGHT:1500,CONTACT_SALES_BUTTON_ZINDEX:700,BUTTON_TOOLTIP_Z_INDEX:650,SHEET_Z_INDEX:999}},230543:function(e,t,i){i.d(t,{c:()=>n,t:()=>r});var s=i(598849);function n({children:e}){let{height:t}=(0,s.Z)();return e(t)}function r(){let{height:e}=(0,s.Z)();return e}},806413:function(e,t,i){i.r(t),i.d(t,{default:()=>ev});var s=i(281098),n=i(667294),r=i(20256),o=i(980787),l=i(19585),a=i(765533),d=i(15667),c=i(536488);function h(e){let t={padding:"23px 0"};return e?{...t,borderTopLeftRadius:16,borderTopRightRadius:16,boxShadow:"0 6px 8px -4px rgba(0, 0, 0, 0.1)",transition:"box-shadow 300ms ease-in-out"}:t}var u=i(825332),p=i(78730),_=i(10594),g=i(346955),m=i(910818),w=i(886981),f=i(968842),x=i(694955),b=i(123998),v=i(866370),y=i(628708),I=i(731462),j=i(667835),S=i(744862),E=i(509120),T=i(785893);function P({i18n:e,headerIconImageUrl:t,headerIconObjects:i=[],headerSmallOverlayIconUrl:o,headerSmallOverlayIconUrlDark:l}){(0,n.useEffect)(()=>{(0,s.Z)("HeaderIcon","/app/common/react/components/growth/news/NewsHub/HeaderIcon/HeaderIcon.tsx")},[]);let a=c.Vp,d=c.uy,[h,u]=(0,n.useState)(null),p=t&&".json"===t.slice(-5).toLowerCase(),_=async e=>{try{let t=await fetch(e);return await t.json()}catch(e){return null}};(0,n.useEffect)(()=>{(async()=>{p&&!h&&u(await _(t))})()},[p,h,t]);let g=(0,n.useMemo)(()=>h?(0,T.jsx)(I.Z,{animationData:h}):(0,T.jsx)(r.xH,{accessibilityLabel:"Loading",show:!0,size:"sm"}),[h]);if(t){let i=p?c.mD:d,s=p?c.vG:d;return(0,T.jsx)(r.xu,{height:i,width:s,children:(0,T.jsx)(r.zd,{height:i,rounding:p?2:"circle",width:s,children:p?(0,T.jsx)(r.xu,{"data-test-id":"lottie-icon",children:g}):(0,T.jsx)(r.xu,{"data-test-id":"header-icon-image",height:i,width:s,children:(0,T.jsx)(r.Ee,{alt:e._('Pinterest recommendation', 'label for notification with recommended content', 'label for notification with recommended content'),color:"#fff",fit:"cover",naturalHeight:d,naturalWidth:d,src:t})})})})}if(0===i.length||void 0===i[0])return null;let m=(0,j.Yc)()?l:o,w=m?(0,T.jsx)(r.xu,{bottom:!0,"data-test-id":"notification-item-icon-overlay",marginBottom:-1,marginEnd:-1,position:"absolute",right:!0,children:(0,T.jsx)(r.zd,{height:c.wl,rounding:c.I2,wash:!0,width:c.wl,children:(0,T.jsx)(r.Ee,{alt:"",fit:"cover",naturalHeight:c.wl,naturalWidth:c.wl,src:m})})}):null,f=i[0].type;if(f===c.Ng.PIN){let e=i[0],t=e.images[c.di],s=c.mD,n=c.vG;return t&&t.url&&(0,T.jsxs)(r.xu,{height:s,position:"relative",width:n,children:[(0,T.jsx)(r.zd,{height:s,rounding:c.I2,wash:!0,children:(0,T.jsx)(r.kC,{alignItems:"stretch",justifyContent:"between",width:n,children:(0,T.jsx)(r.GH,{contentAspectRatio:t.width/t.height,height:s,width:n,children:(0,T.jsx)(r.Ee,{alt:e.description,naturalHeight:s,naturalWidth:n,src:t.url})})})}),w]})}if(f===c.Ng.BOARD){let e=i[0].image_cover_url;return(0,T.jsx)(r.xu,{height:d,width:d,children:(0,T.jsx)(r.zd,{height:d,rounding:c.I2,wash:!0,children:(0,T.jsx)(r.kC,{alignItems:"stretch",justifyContent:"between",width:d,children:(0,T.jsx)(r.GH,{contentAspectRatio:1,height:d,width:d,children:(0,T.jsx)(E.Z,{height:d,imgPos:{width:0,height:0,x:0,y:0},imgUrl:e,width:d})})})})})}if(f===c.Ng.SEARCH){let e=i[0],t=Array.isArray(e.images)&&e.images[0]?e.images[0]:"";return(0,T.jsx)(r.xu,{height:d,width:d,children:(0,T.jsx)(r.zd,{height:d,rounding:c.I2,wash:!0,children:(0,T.jsx)(r.kC,{alignItems:"stretch",justifyContent:"between",width:d,children:(0,T.jsx)(r.GH,{contentAspectRatio:1,height:d,width:d,children:(0,T.jsx)(E.Z,{height:d,imgPos:{width:0,height:0,x:0,y:0},imgUrl:t,width:d})})})})})}if(f===c.Ng.USER)if(i.length>1&&void 0!==i[1]){let e=i[0],t=i[1];return(0,T.jsx)(r.xu,{height:d,width:d,children:(0,T.jsxs)(r.xu,{height:d,position:"relative",width:d,children:[(0,T.jsx)(r.xu,{display:"flex",height:a,left:!0,position:"absolute",top:!0,width:a,children:(0,T.jsx)(S.qE,{name:e.full_name,outline:!0,src:e.image_large_url})}),(0,T.jsx)(r.xu,{bottom:!0,display:"flex",height:a,position:"absolute",right:!0,width:a,children:(0,T.jsx)(S.qE,{name:t.full_name,outline:!0,src:t.image_large_url})})]})})}else{let e=i[0];return(0,T.jsx)(r.xu,{height:d,position:"relative",width:d,children:(0,T.jsxs)(r.kC,{alignItems:"stretch",justifyContent:"between",width:d,children:[(0,T.jsx)(S.qE,{name:e.full_name,src:e.image_large_url}),w]})})}return null}function A(e){(0,n.useEffect)(()=>{(0,s.Z)("HeaderIcon","/app/common/react/components/growth/news/NewsHub/HeaderIcon/HeaderIcon.tsx")},[]);let t=(0,l.ZP)();return(0,T.jsx)(P,{...e,i18n:t})}var N=i(61063),H=i(686319),C=i(821342),L=i(670622),Z=i(777939),R=i(669442),z=i(483180),O=i(554158),M=i(163404),U=i(378888),D=i(475498),k=i(473728),B=i(87853),F=i(966279);let G={UNFOLLOWED_USER:"unfollowedUser",UNFOLLOWED_PIN:"unfollowedPin",FOLLOWED_USER:"followedUser",FOLLOWED_PIN:"followedPin",ACTION_FAILED:"actionFailed"};function W({handleClick:e,handleEnterEllipsis:t,handleExitEllipsis:i,handleObjectSubscriptionById:a,isMouseOverEllipsis:d,newsId:h,newsType:u,subscribableObjects:p,subscribedToObjectIdMap:_}){(0,n.useEffect)(()=>{(0,s.Z)("MenuEllipsis","/app/www/growth/news/NewsHub/MenuEllipsis/MenuEllipsis.tsx")},[]);let{logContextEvent:g}=(0,o.u)(),{updateNewsIdToHiddenNews:m}=(0,F.nJ)(),w=(0,l.ZP)(),f=(0,n.useRef)(null),x=p?p[0]:null,b=x?.id??0,v=x?.type??"",y=x?.full_name??"",{showToast:I,showOneToast:j}=(0,B.dI)(),[S,E]=(0,n.useState)(!1),[P,A]=(0,n.useState)(!1),[N,C]=(0,n.useState)(_[b]),L=!!x,R=`${c.C}_${h}`,z={unfollowedUser:(0,k.Z)(w._('You will no longer receive notifications about {{user_name}}.', 'unfollwedUser.toast', 'Unfollowed a user'),{user_name:y}),unfollowedPin:w._('You will no longer receive notifications about this Pin.', 'unfollwedPin.toast', 'Unfollowed a pim'),followedUser:(0,k.Z)(w._('You will now receive notifications about {{user_name}}.', 'followedUser.toast', 'Followed a user'),{user_name:y}),followedPin:w._('You will now receive notifications about this Pin.', 'follwedPin.toast', 'Followed a pim'),actionFailed:w._('Action could not be performed', 'notPerformed.toast', 'action could not be performed')},O={unfollowedUser:(0,k.Z)(w._('Turn off updates from {{ user_name }}', 'NewsListItem.UnfollowUser.Flyout', 'Turn off updates from a user, user_name: user_name of the followed user'),{user_name:y}),unfollowedPin:w._('Turn off updates from this Pin', 'NewsListItem.UnfollowPin.Flyout', 'Unfollow a pin'),followedUser:(0,k.Z)(w._('Turn on updates from {{ user_name }}', 'NewsListItem.UnfollowUser.Flyout', 'Turn on updates from a user, user_name: user_name of the followed user'),{user_name:y}),followedPin:w._('Turn on updates from this Pin', 'NewsListItem.FollowPin.Flyout', 'Follow a pin'),actionFailed:""};(0,n.useEffect)(()=>{P&&e()},[P]),(0,n.useEffect)(()=>{b&&C(_[b])},[_[b]]);let M=e=>{let t=w._('Action could not be performed', 'notPerformed.toast', 'action could not be performed');Object.values(G).includes(e)&&(t=z[e]),I(({hideToast:e})=>(0,T.jsx)(D.Z,{duration:c.QE,onHide:e,text:t}))},U=(e,t)=>{let{UNFOLLOWED_USER:i,UNFOLLOWED_PIN:s,FOLLOWED_USER:n,FOLLOWED_PIN:r,ACTION_FAILED:o}=G,{USER:l,PIN:a}=c.Ng;return e&&t===l?i:e||t!==l?e&&t===a?s:e||t!==a?o:r:n},W=async()=>{try{let{error:e,data:t}=(await (0,H.Z)({url:"/v3/settings/notifications/objects/",method:"POST",data:{object_ids_to_unsubscribe:N?b:null,object_ids_to_resubscribe:N?null:b}})).resource_response;e||a(b,t[b]);let i=U(!!N,v);M(i)}catch(e){M(e)}},Y=async e=>{try{let{error:t}=(await (0,Z._Z)(h,e)).resource_response;t||K(e)}catch(e){M(e)}},X=async e=>{try{await (0,Z.fK)(h,e)}catch(e){M(e)}},$=async e=>{try{let{error:t}=(await (0,H.Z)({url:"/v3/news_hub/hide/batch/",method:"PUT",data:{news_ids:[h],should_hide:e}})).resource_response;!t&&(m(h,e),e&&V())}catch(e){M(e)}},V=()=>{let e=w._('Update removed!', 'NewsListItem.UndoRemove.Toast.Text', 'text for restore hidden toast');j(({hideToast:t})=>(0,T.jsx)(D.Z,{duration:c.QE,onHide:t,primaryAction:{accessibilityLabel:w._('Undo removal', 'NewsListItem.UndoRemove.Toast.a11yButton', 'restores the removed news'),label:w._('Undo', 'NewsListItem.UndoRemove.Toast.Button', 'restores the removed news'),onClick:()=>{$(!1),t()}},text:e}))},q=()=>{g({event_type:101,element:12209,component:3,view_type:107,view_parameter:3081,object_id_str:JSON.stringify(b),aux_data:{news_type:u,is_unsub_action:N}}),W(),i(),E(!1)},J=e=>{g({event_type:101,element:14308,component:3,view_type:107,view_parameter:3081}),Y(e),i(),E(!1)},K=e=>{let t=w._('Got it! We\'ll show you less about this interest', 'NewsListItem.UndoSeeLess.Toast.Text', 'text for see less undo toast');j(({hideToast:i})=>(0,T.jsx)(D.Z,{duration:c.QE,onHide:i,primaryAction:{accessibilityLabel:w._('Undo see less', 'NewsListItem.UndoSeeLess.Toast.a11yButton', 'undoes the see less action'),label:w._('Undo', 'NewsListItem.UndoSeeLess.Toast.Button', 'undoes the see less action'),onClick:()=>{g({event_type:101,element:14309,component:3,view_type:107,view_parameter:3081}),X(e),i()}},text:t}))},Q=()=>{g({event_type:101,element:13135,component:3,view_type:107,view_parameter:3081}),$(!0),i(),E(!1)},ee=()=>{g({event_type:101,element:12210,component:3,view_type:107,view_parameter:3081,aux_data:{news_type:u}}),A(!0)};return(0,T.jsxs)(r.xu,{ref:f,onMouseEnter:t,onMouseLeave:i,children:[(0,T.jsx)(r.hU,{accessibilityControls:R,accessibilityExpanded:S,accessibilityLabel:w._('Options to update subscription settings', 'Options to update subscription settings', 'Update subscription settings'),bgColor:"white",dataTestId:"ellipsis-icon",icon:"ellipsis",iconColor:"darkGray",onClick:()=>{g({event_type:101,element:12208,component:3,view_type:107,view_parameter:3081,aux_data:{was_flyout_open:S,news_type:u}}),E(!S)},selected:d,size:"xs"}),S&&(()=>{let e=w._('View notification settings', 'NewsListItem.ViewNotificationSettings.Flyout', 'View notification settings'),t=w._('Delete update', 'NewsListItem.RemoveNews.Item', 'Delete update'),i=v===c.Ng.INTEREST;return(0,T.jsxs)(r.Lt,{anchor:f.current,disableMobileUI:!0,id:R,idealDirection:"down",maxHeight:"30vh",onDismiss:()=>E(!1),zIndex:new r.Ry(1e3),children:[i?(()=>{let e=w._('See less about', 'NewsListItem.SeeLess.Item', 'See less updates about an interest'),t=p?p[0]:null,i=p?p[1]:null,s=t?.id??"",o=e+" "+(t?.name??"");if(!i)return(0,T.jsx)(r.Lt.Item,{onSelect:()=>J(s.toString()),option:{label:o,value:o}});{let t=i.id??"",l=e+" "+(i.name??"");return(0,T.jsxs)(n.Fragment,{children:[(0,T.jsx)(r.Lt.Item,{onSelect:()=>J(s.toString()),option:{label:o,value:o}}),(0,T.jsx)(r.Lt.Item,{onSelect:()=>J(t.toString()),option:{label:l,value:l}})]})}})():L&&(()=>{let e=U(!!N,v),t="";return Object.values(G).includes(e)&&(t=O[e]),(0,T.jsx)(r.Lt.Item,{onSelect:q,option:{label:t,value:t}})})(),(0,T.jsx)(r.Lt.Item,{onSelect:Q,option:{label:t,value:t}}),(0,T.jsx)(r.Lt.Link,{href:"/settings/notifications",onClick:ee,option:{label:e,value:e}})]})})()]})}function Y({board:{name:e,image_cover_url:t,images:i}}){(0,n.useEffect)(()=>{(0,s.Z)("MiniBoardGrid","/app/www/growth/news/NewsHub/MiniBoardGrid/MiniBoardGrid.tsx")},[]);let o=t?{url:t}:void 0,l=function(e,t){let i=e?new Set([e.substring(e.lastIndexOf("/")+1)]):new Set;return(t?t[c.ZH]:[]).filter(e=>{let t=(e.url??"").substring((e.url??"").lastIndexOf("/")+1);return!i.has(t)&&(i.add(t),!0)})}(t,i);if(void 0===o||l.length<c.kc)return null;let a=[l.slice(0,2),l.slice(2,4)];return(0,T.jsx)(r.xu,{height:c.wA,width:c.aE,children:(0,T.jsx)(r.zd,{height:c.wA,rounding:c.gs,wash:!0,children:(0,T.jsxs)(r.kC,{alignItems:"stretch",justifyContent:"between",width:c.aE,children:[(0,T.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{marginRight:c.GO}},height:c.AM,position:"relative",width:c.qZ,children:(0,T.jsx)(E.Z,{height:c.AM,imgPos:{width:0,height:0,x:0,y:0},imgUrl:o.url,width:c.qZ})}),a.map((t,i)=>(0,T.jsx)(r.xu,{children:t.map((s,n)=>(0,T.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{marginRight:i<a.length-1?c.GO:"",marginBottom:n<t.length-1?c.GO:""}},height:c.So,position:"relative",width:c.qb,children:(0,T.jsx)(r.GH,{contentAspectRatio:(s.width??1)/(s.height??1),height:c.So,width:c.qb,children:s.url&&(0,T.jsx)(r.Ee,{alt:e??"",naturalHeight:s.height??1,naturalWidth:s.width??1,src:s.url})})},"col"+i+"row"+n))},"col"+i))]})})})}function X(e){(0,n.useEffect)(()=>{(0,s.Z)("MiniInterestGrid","/app/www/growth/news/NewsHub/MiniInterestGrid/MiniInterestGrid.tsx")},[]);let{interests:t}=e;if(!t||!t.length)return null;let i=t.slice(0,c.c4),o=i.length/c.c4*c.aE;return(0,T.jsx)(r.xu,{height:c.wA,width:o,children:(0,T.jsx)(r.zd,{height:c.wA,rounding:c.gs,wash:!0,children:(0,T.jsx)(r.kC,{alignItems:"stretch",justifyContent:"between",width:o,children:i.map((e,t)=>{let{background_color:s,images:{"236x":n},name:o}=e;return n?(0,T.jsxs)(r.xu,{dangerouslySetInlineStyle:{__style:{marginRight:t<i.length-1?c.GO:""}},height:c.Rd,position:"relative",width:c.P,children:[(0,T.jsx)(r.GH,{contentAspectRatio:n.width&&n.height?n.width/n.height:1,height:c.Rd,width:c.P,children:n.url&&(0,T.jsx)(r.Ee,{alt:o,color:s,naturalHeight:1,naturalWidth:1,src:n.url})}),(0,T.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:c.uW},height:c.Rd,left:!0,position:"absolute",top:!0,width:c.P}),(0,T.jsx)(r.xu,{alignItems:"center",display:"flex",height:c.Rd,justifyContent:"center",padding:3,position:"absolute",top:!0,width:c.P,children:(0,T.jsx)(r.xv,{align:"center",color:"inverse",weight:"bold",children:o})})]},t):null})})})})}let $=function(e){let{pins:t}=e;if(0===t.length)return null;let i=t.slice(0,c.ie),s=i.length/c.ie*c.aE;return(0,T.jsx)(r.xu,{height:c.wA,width:s,children:(0,T.jsx)(r.zd,{height:c.wA,rounding:c.gs,wash:!0,children:(0,T.jsx)(r.kC,{alignItems:"stretch",justifyContent:"between",width:s,children:i.map((e,t)=>(0,T.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{marginRight:t<i.length-1?c.GO:""}},height:c.P3,overflow:"hidden",position:"relative",width:c.J0,children:(0,T.jsx)(r.GH,{contentAspectRatio:e.width&&e.height?e.width/e.height:1,height:c.P3,width:c.J0,children:e.url&&(0,T.jsx)(r.Ee,{alt:"MiniPinGridLego",naturalHeight:1,naturalWidth:1,src:e.url})})},t))})})})};function V(e){(0,n.useEffect)(()=>{(0,s.Z)("MiniSearchGrid","/app/www/growth/news/NewsHub/MiniSearchGrid/MiniSearchGrid.tsx")},[]);let{searches:t}=e;if(!t||!t.length)return null;let i=t.filter(e=>void 0!==e).slice(0,c.DX),o=[[],[]];i.map((e,t)=>(o[t%c.mM].push(e),e));let l=o[0].length/c.ci*c.wA,a=Math.min(t.length,c.mM)/c.mM*c.aE;return(0,T.jsx)(r.xu,{height:l,width:a,children:(0,T.jsx)(r.zd,{height:l,rounding:c.gs,children:(0,T.jsx)(r.kC,{alignItems:"stretch",justifyContent:"between",width:a,children:o.map((e,t)=>(0,T.jsx)(r.xu,{children:e.map((i,s)=>{let{images:n=[],term:l}=i;return(0,T.jsxs)(r.xu,{dangerouslySetInlineStyle:{__style:{marginRight:t<o.length-1?c.GO:"",marginBottom:s<e.length-1?c.GO:""}},height:c.cU,position:"relative",width:c.WC,children:[(0,T.jsx)(r.GH,{contentAspectRatio:2,height:c.cU,width:c.WC,children:(0,T.jsx)(r.Ee,{alt:l,naturalHeight:1,naturalWidth:1,src:n[0]})}),(0,T.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:c.uW},height:c.cU,left:!0,position:"absolute",top:!0,width:c.WC}),(0,T.jsx)(r.xu,{alignItems:"center","data-test-id":"term-text",display:"flex",height:c.cU,justifyContent:"center",padding:3,position:"absolute",top:!0,width:c.WC,children:(0,T.jsx)(r.xv,{align:"center",color:"inverse",weight:"bold",children:l})})]},"col"+t+"row"+s)})},"col"+t))})})})}var q=i(64932),J=i(30536),K=i(197891),Q=i(771347),ee=i(694103);function et(e,t,i){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:s+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class ei extends n.Component{constructor(e){super(e),et(this,"getHandleClickFun",e=>()=>{let{handleClick:t,id:i,type:s,logContextEvent:n}=this.props;n({event_type:101,object_id_str:i,view_type:107,view_parameter:3081,aux_data:{news_type:s}}),this.handleNewsHubClickTrackLogging(i,e),t()}),et(this,"handleNewsHubClickTrackLogging",(e,t)=>{(0,H.Z)({url:"/v3/news_hub/click/",method:"POST",data:{news_id_str:e,link:t}})}),this.state={isMouseOverComponent:!1,isMouseOverEllipsis:!1}}get displayComponent(){let{contentItems:e,contentText:t,displayMode:i}=this.props,s=e.filter(({content_object:e})=>e).map(({content_object:e})=>e);if((0,Z.Y0)(i,[c.gb.MINI_PIN_GRID_2])){let e=s.map(e=>e.images[c.yc]);return(0,T.jsx)($,{pins:e})}if((0,Z.Y0)(i,[c.gb.MINI_BOARD_GRID,c.gb.MINI_BOARD_GRID_WITH_ICON]))return(0,T.jsx)(Y,{board:s[0]});if((0,Z.Y0)(i,[c.gb.MINI_USER_GRID])){let e=s[0].recent_pin_images["200x"]||[];return(0,T.jsx)($,{pins:e})}if((0,Z.Y0)(i,[c.gb.ROW_WITH_COUNT_2])){let e=new Set,t=s.filter(t=>{let{image_signature:i}=t;return!(i&&e.has(i))&&(e.add(i),!0)}).map(e=>e.images[c.yc]);return(0,T.jsx)($,{pins:t})}if((0,Z.Y0)(i,[c.gb.MINI_INTEREST_GRID]))return(0,T.jsx)(X,{interests:s});if((0,Z.Y0)(i,[c.gb.MINI_SEARCH_GRID]))return(0,T.jsx)(V,{searches:s});if((0,Z.Y0)(i,[c.gb.BASIC]))return null;else if((0,Z.Y0)(i,[c.gb.TEXT]))return(0,T.jsx)(r.xu,{width:c.zM,children:(0,T.jsx)(r.xv,{children:t})})}render(){let{currentSite:e,handleClick:t,handleObjectSubscriptionById:i,headerText:s,headerIconImageUrl:n,headerIconObjects:o,headerSmallOverlayIconUrl:l,headerSmallOverlayIconUrlDark:a,id:d,isVerticalNavEnabled:h,isSideBarEnabled:u,sideBarWidth:p,isHighlightNotif:_,lastUpdatedAt:g,siteType:m,textMapping:w,titleText:f,subscribableObjects:x,subscribedToObjectIdMap:b,type:v,viewer:y}=this.props,{overrideClickUrl:I}=this.props;I&&void 0!==(0,M.Z)(I)&&(I=(0,R.Z)(I,{entrySource:"news_hub"}));let j=!!y.isAuth&&y.isLimitedLogin,S=I||"/news_hub/"+d,E=(0,O.Z)(S),P=E?S:(0,K.Z)({currentSiteType:m,destinationSiteType:0,inputPath:S}),{displayComponent:H}=this,C=I?(0,U.sD)(I):null,L="DESKTOP"===e||E?P:z.C0.concat(P),Z=C&&!E?I:L,D=_?c.yf:{},k=u?p-28:h?c.d1:c.V$;return(0,T.jsx)(r.Zf,{overflow:"visible",children:(0,T.jsxs)(r.xu,{alignItems:"center",borderStyle:"none",color:this.state.isMouseOverComponent&&!this.state.isMouseOverEllipsis?_?"transparent":"secondary":"transparent",dangerouslySetInlineStyle:{__style:{cursor:"pointer",borderColor:"#E9E9E9",...D}},"data-test-id":"news-hub-list-item",direction:"column",display:"flex",marginBottom:1,marginEnd:2,marginStart:2,onMouseEnter:()=>this.setState({isMouseOverComponent:!0}),onMouseLeave:()=>this.setState({isMouseOverComponent:!1}),padding:2,rounding:4,width:k,children:[(0,T.jsxs)(r.kC,{alignItems:"center",width:"100%",children:[(0,T.jsx)(r.Tg,{href:Z,onTap:this.getHandleClickFun(Z),target:C?"blank":null,children:(0,T.jsxs)(r.kC,{alignItems:"center",justifyContent:"start",children:[(n||o)&&(0,T.jsx)(A,{headerIconImageUrl:n,headerIconObjects:o,headerSmallOverlayIconUrl:l,headerSmallOverlayIconUrlDark:a}),(0,T.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{margin:"0 8px"}},display:"flex",marginEnd:1===x.length?2:1,marginStart:2*(void 0===o),children:(0,T.jsxs)(r.X6,{accessibilityLevel:2,children:[f&&(0,T.jsx)(r.xu,{children:(0,T.jsx)(r.xv,{weight:"bold",children:f})}),(0,T.jsx)(r.xv,{inline:!0,children:(0,T.jsx)(q.Z,{text:s,textMapping:w})})]})})]})}),(0,T.jsxs)(r.xu,{direction:"column",display:"flex",marginEnd:1,minHeight:c.pv,position:"relative",width:h?c.Z1:c.Cc,children:[(0,T.jsx)(r.xu,{marginBottom:1,marginEnd:1,overflow:"hidden",children:(0,T.jsx)(r.xv,{align:"end",color:"subtle",size:"100",children:(0,N.Z)(new Date(g),this.props.getHumanizedTimeSince)?.replace(/\u00A0|&nbsp;/g," ")})}),!j&&(0,T.jsx)(r.xu,{alignSelf:"end",children:(0,T.jsx)(W,{handleClick:t,handleEnterEllipsis:()=>this.setState({isMouseOverEllipsis:!0}),handleExitEllipsis:()=>this.setState({isMouseOverEllipsis:!1}),handleObjectSubscriptionById:i,isMouseOverEllipsis:this.state.isMouseOverEllipsis,newsId:d,newsType:v,subscribableObjects:x,subscribedToObjectIdMap:b})})]})]}),!!H&&(0,T.jsx)(r.Tg,{accessibilityLabel:"News Detail Page",href:Z,onTap:this.getHandleClickFun(Z),children:(0,T.jsx)(r.xu,{"aria-hidden":!0,marginTop:2,children:H})})]})})}componentDidMount(){(0,s.Z)("ListItem","/app/www/growth/news/NewsHub/ListItem/ListItem.tsx")}}et(ei,"defaultProps",{subscribableObjects:[]});let es=(0,y.Z)(function(e){(0,n.useEffect)(()=>{(0,s.Z)("ListItem","/app/www/growth/news/NewsHub/ListItem/ListItem.tsx")},[]);let{logContextEvent:t}=(0,o.u)(),i=(0,L.Z)(),r=(0,l.ZP)(),a=(0,C.Z)(),d=(0,Q.Z)(),{sideBarWidth:c}=(0,ee.Z)();return(0,T.jsx)(ei,{...e,currentSite:(0,J.I)().currentSite,getHumanizedTimeSince:i,i18n:r,isSideBarEnabled:d,logContextEvent:t,sideBarWidth:c,viewer:a})});var en=i(355940);class er extends n.PureComponent{render(){return(0,T.jsx)(n.Fragment,{children:(0,T.jsx)(en.Z,{name:"FirstStoryExperience",children:(0,T.jsx)(r.xu,{width:c.V$})})})}}var eo=i(209026);function el({handleDismissPanel:e}){(0,n.useEffect)(()=>{(0,s.Z)("NotificationEmptyStatePage","/app/www/growth/news/NewsHub/NewsHubPanel/NotificationEmptyStatePage.tsx")},[]);let t=(0,l.ZP)(),i=(0,u.TH)(),{logContextEvent:a}=(0,o.u)();return(0,T.jsx)(r.xu,{alignItems:"center",display:"flex",height:`calc(100% - ${c.uZ}px)`,justifyContent:"center",top:!0,width:c.hy,children:(0,T.jsx)(r.xu,{display:"flex",justifyContent:"center",marginBottom:5,width:"100%",children:(0,T.jsx)(eo.Z,{containerSize:320,description:t._('Use updates to see activity on your Pins and boards and get tips on topics to explore. They\u2019ll be here soon.', 'notifications.sunglasses.illustrations.description', 'Message displayed under the illustration when no notifications'),illustrationSize:186,message:t._('Updates are on their way', 'notifications.sunglasses.illustrations.message', 'Description displayed under the illustration when no notifications'),name:"sunglasses",primaryAction:["/","/homefeed"].includes(i.pathname)?null:(0,T.jsx)(r.ZP,{href:"/",onClick:()=>{a({event_type:101,view_type:107,view_parameter:3083,component:13583}),e()},text:t._('Browse home feed', 'notificatons.sunglasses.illustration', 'Button text for refreshing the page when no notifications')})})})})}var ea=i(382112),ed=i(780869);function ec(e,t,i){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:s+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class eh extends n.Component{constructor(e){super(e),ec(this,"handleItemClick",()=>{this.props.handleItemClick()}),ec(this,"handleObjectSubscriptionById",(e,t)=>{this.setState(({subscribedToObjectIdMap:i})=>({subscribedToObjectIdMap:{...i,[e]:t}}))}),ec(this,"renderItem",(e,t,i,s,n)=>{let r={...this.state.subscribedToObjectIdMap};e.subscribable_objects&&e.subscribable_objects.forEach(e=>{void 0===r[e.id]&&(r[e.id]=e.subscribed_to_notifications)});let o={impressionAuxFields:{newsType:e.news_type},impressionType:"News",loggingId:e.id,slotIndex:t,viewParameter:3081,viewType:107},l=(0,T.jsx)(es,{contentItemCount:e.content_item_count,contentItems:e.content_items,contentText:e.content_text,displayMode:e.encoded_display_mode,handleClick:this.handleItemClick,handleObjectSubscriptionById:this.handleObjectSubscriptionById,headerIconImageUrl:e.header_icon_image_url,headerIconObjects:e.header_icon_objects,headerSmallOverlayIconUrl:e.header_small_overlay_icon_image_url,headerSmallOverlayIconUrlDark:e.header_small_overlay_icon_image_url_dark,headerText:e.header_text,id:e.id,isHighlightNotif:n,isVerticalNavEnabled:this.props.isVerticalNavEnabled,lastUpdatedAt:e.last_updated_at,overrideClickUrl:e.override_click_url,requestContext:this.props.requestContext,shouldHighlight:null!==i&&s,subHeaderText:e.sub_header_text,subscribableObjects:e.subscribable_objects,subscribedToObjectIdMap:r,textMapping:e.text_mapping,titleText:e.title_text,type:e.news_type,unread:e.unread,...o});return null!==i?(0,T.jsx)("li",{ref:i,children:l},t):(0,T.jsx)("li",{id:e.id,children:l},t)}),ec(this,"renderTopStoryExperience",()=>(0,T.jsx)(er,{})),ec(this,"renderBottomSection",()=>this.props.isIaNavUpdForEngagementExperiment&&(0,T.jsx)(r.xu,{bottom:!0,"data-test-id":"news-engagement-button",marginEnd:2,marginStart:3,paddingY:3,position:"absolute",width:340,children:(0,T.jsx)(m.ZP,{fullWidth:!0,href:this.props.engagementUrl,logEventProps:{},onClick:this.props.onClickEngagementButton,text:this.props.i18n._('View audience engagement', 'ads.notifications.center.goToEngagementButton', 'Accessible label for button to see your engagements')})},"btn-view-engagement-page")),this.state={subscribedToObjectIdMap:{}}}componentWillUnmount(){this.props.newsHubResource.refresh()}componentDidMount(){(0,s.Z)("NewsHubPanel","/app/www/growth/news/NewsHub/NewsHubPanel/NewsHubPanel.tsx"),this.logPanelImpression()}logPanelImpression(){let{logContextEvent:e,viewType:t,viewParameter:i}=this.props;e({event_type:13,view_type:107,view_parameter:3081}),e({event_type:13,view_type:t,view_parameter:i})}render(){return(0,T.jsx)(b.Z,{view:107,viewParameter:3081,children:(0,T.jsx)(ea.Z,{handleScrollShadow:this.props.handleScrollShadow,highlightId:this.props.highlightScrollSidebar?this.props.utmNewsHubId:null,listResource:this.props.newsHubResource,renderBottomSection:this.renderBottomSection,renderEmptyState:()=>(0,T.jsxs)(r.xu,{children:[(0,T.jsx)(el,{handleDismissPanel:this.handleItemClick}),this.renderBottomSection()]}),renderItem:this.renderItem,renderSectionHeaders:!0,renderTopStoryExperience:this.renderTopStoryExperience,shouldHighlightListItem:this.props.highlightScrollSidebar,shouldScrollToItem:this.props.highlightScrollSidebar})})}}function eu(e){(0,n.useEffect)(()=>{(0,s.Z)("NewsHubPanel","/app/www/growth/news/NewsHub/NewsHubPanel/NewsHubPanel.tsx")},[]);let{logContextEvent:t}=(0,o.u)(),i=(0,l.ZP)(),r=(0,d.B)(),a=(0,u.s0)(),h=(0,w.Z)({name:"NewsHubResource",options:{page_size:c.QX},noCache:!0}),{viewType:m,viewParameter:b}=(0,g.SU)(),{is_sterling_on_steroids:y}=(0,p.N)(),I=(0,f.Z)(),{isAnalyticsSite:j,isSterlingSite:S,isTrendsSite:E}=(0,_.Z)(I),P=S||j||y||E?x.i$J:x.hzH,A=(0,ed.Z)(),N=(0,v.Ri)(t);return(0,T.jsx)(eh,{...e,engagementUrl:P,i18n:i,isIaNavUpdForEngagementExperiment:A,logContextEvent:t,navigate:a,newsHubResource:h,onClickEngagementButton:N,requestContext:r,viewParameter:b,viewType:m})}ec(eh,"defaultProps",{handleItemClick:()=>{},onClickEngagementButton:()=>{}});let ep=({showShadow:e,selectedIndex:t,onChange:i,tabItems:o})=>((0,n.useEffect)(()=>{(0,s.Z)("NewsHubTabbedHeader","/app/www/growth/news/NewsHub/NewsHubPanel/NewsHubTabbedHeader.tsx")},[]),(0,T.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:h(e)},"data-test-id":"news-hub-title",children:(0,T.jsx)(r.xu,{paddingX:3,width:"100%",children:(0,T.jsx)(r.sY,{items:o,onChange:({activeIndex:e})=>{i(e)},selectedItemIndex:t})})}));var e_=i(230543),eg=i(244529),em=i(74459),ew=i(77836),ef=i(78762);let ex=(0,ef.Z)(()=>i.e("88010").then(i.bind(i,23997)),void 0,e=>23997,"app-sterling-AdsNotificationsCenterDropdown-AdsNotificationsCenterPanel",e=>["88010"]),eb=(0,ef.Z)(()=>i.e("3967").then(i.bind(i,550597)),void 0,e=>550597,"app-sterling-AdsNotificationsCenterDropdown-AdsNotificationsCenterTabHeader",e=>["3967"]);function ev({handleDismissPanel:e,highlightScrollSidebar:t,newsButton:i,show:u,utmNewsHubId:p}){(0,n.useEffect)(()=>{(0,s.Z)("NewsHubSidebar","/app/www/growth/news/NewsHub/NewsHubPanel/NewsHubSidebar.tsx")},[]);let{logContextEvent:_}=(0,o.u)(),g=(0,l.ZP)(),m=(0,n.useRef)(null),w=(0,d.B)(),f=(0,em.Z)(),{enabled:x}=(0,eg.Z)(),b=(0,Q.Z)(),{sideBarWidth:v,togglePanelState:y}=(0,ee.Z)(),I=w.advertiser?.id,j=!!I,[S,E]=(0,n.useState)(+!!j),[P,A]=(0,n.useState)(!1),N=t=>{let{target:s}=t,{current:n}=m,r=n&&s instanceof Node&&!n.contains(s),o=i&&s instanceof Node&&i.contains(s),l=s instanceof HTMLElement&&s.offsetParent?.id===c.C;!r||o||l||e()},H=(0,n.useMemo)(()=>[g._('Pins', 'New title for news hub dropdown on the right upper corner in home page', 'New title for news hub dropdown on the right upper corner in home page'),(0,T.jsx)(eb,{fallback:(0,T.jsx)(r.xv,{color:1===S?"default":"subtle",size:"200",weight:"bold",children:g._('Ads', '[m10n]newshubSidebar.header.tabLabel', 'New title for news hub dropdown on the right upper corner in home page')}),requestContextAdvertiserId:w.advertiser?.id??"",showing:1===S},`${u.toString()}${S}`)],[w,S,g,u]);(0,n.useEffect)(()=>(document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)),[]);let C=u?"0px":"-25px",L=(0,n.useCallback)(t=>{t.keyCode===a.Z.ESCAPE&&e()},[]);(0,n.useEffect)(()=>(document.addEventListener("keydown",L,!1),()=>{document.removeEventListener("keydown",L,!1)}),[]),(0,n.useEffect)(()=>{if(1!==S)return;let{component:e,element:t,event:i,view:s,viewParameter:n}={component:8,element:11840,event:101,view:412,viewParameter:3465};_({event_type:i,component:e,element:t,view_type:s,view_parameter:n,aux_data:{current_page_url:window.location.href,advertiser_id:I}})},[I,_,S]);let{isRTL:Z}=w,R=f+ew.L7,z={width:ew.GJ,maxWidth:ew.GJ+c.Ay,minWidth:c.hy,right:Z?R:void 0,left:Z?void 0:R,boxShadow:"rgba(0, 0, 0, 0.1) -3px 4px 14px 0px"},O={maxWidth:c.HJ,minWidth:c.hy,transition:"top 100ms linear",left:Z?0:void 0,right:Z?void 0:0,boxShadow:"rgba(0, 0, 0, 0.1) -3px 4px 14px 0px"},M={marginTop:0,width:v-.5};return(0,T.jsx)(e_.c,{children:i=>{let s,o;return b?(o=M,s="100vh"):x?(o=z,s=`calc(100vh - ${2*ew.zz}px)`):(o=O,s=`calc(100vh - ${i}px - 8px)`),(0,T.jsx)(r.xu,{ref:m,bottom:!0,color:"default",dangerouslySetInlineStyle:{__style:{marginTop:x?ew.zz:i,overscrollBehavior:"none",top:C,...o}},height:s,id:c.o9,marginBottom:b?void 0:2,marginEnd:b?void 0:2,position:"fixed",rounding:b?void 0:4,tabIndex:-1,children:(0,T.jsxs)(r.kC,{alignItems:"stretch",direction:"column",height:"100%",justifyContent:"start",children:[j?(0,T.jsx)(ep,{onChange:E,selectedIndex:S,showShadow:u&&P,tabItems:H}):(0,T.jsxs)(r.xu,{dangerouslySetInlineStyle:{__style:{...h(u&&P),...x?{paddingBlock:"20px",paddingInline:"16px"}:{}}},"data-test-id":"news-hub-title",direction:b?"row":void 0,display:b?"flex":void 0,justifyContent:b?"between":void 0,children:[(0,T.jsx)(r.X6,{accessibilityLevel:1,align:x?"start":"center",size:x?"400":"300",children:g._('Updates', 'New title for news hub dropdown on the right upper corner in home page', 'New title for news hub dropdown on the right upper corner in home page')}),b&&(0,T.jsx)(r.hU,{accessibilityLabel:g._('Close news hub', 'navBar.newsHub.header', 'Button to close the news hub'),icon:"cancel",onClick:()=>y("news"),size:"sm"})]}),u?(0,T.jsx)(n.Fragment,{children:0===S?(0,T.jsx)(eu,{handleItemClick:e,handleScrollShadow:A,highlightScrollSidebar:t,isVerticalNavEnabled:x,locale:w.locale,utmNewsHubId:p}):(0,T.jsx)(ex,{onNotificationItemClick:e,requestContextAdvertiserId:I})}):(0,T.jsx)(ea.Z,{listResource:{auxData:{},data:[],fetchMore:()=>{},isAtEnd:!1,isFetching:!1,isLoaded:!1,isRefreshing:!1,refresh:()=>{}},renderEmptyState:()=>(0,T.jsx)(r.xu,{}),renderItem:()=>(0,T.jsx)(r.xu,{})})]})})}})}},64932:function(e,t,i){i.d(t,{Z:()=>a});var s=i(281098),n=i(667294),r=i(20256),o=i(302148),l=i(785893);function a(e){(0,n.useEffect)(()=>{(0,s.Z)("NewsText","/app/www/growth/news/NewsHub/NewsText/NewsText.tsx")},[]);let{applyMarkup:t=!0,applyLink:i=!1,text:a,textMapping:d={}}=e,c={};return d&&Object.keys(d).forEach(e=>{let s=d[e];null!==s&&(s.t?c[e]=s.t.toString():c[e]="",t&&(s.b&&(c[e]=(0,l.jsx)(r.xv,{inline:!0,weight:"bold",children:c[e]},e)),s.r&&(c[e]=(0,l.jsx)(r.xv,{color:"error",inline:!0,children:c[e]},e)),s.l&&i&&(c[e]=(0,l.jsx)(r.rU,{display:"inlineBlock",href:s.l,underline:"hover",children:c[e]},e))))}),(0,l.jsx)(r.xu,{"data-test-id":"updates-link-text",children:(0,l.jsx)(r.xv,{inline:!0,children:a?(0,o.bF)(a,c):null})})}},382112:function(e,t,i){i.d(t,{Z:()=>x});var s=i(281098),n=i(667294),r=i(20256),o=i(19585),l=i(777939),a=i(2929),d=i(159527),c=i(536488),h=i(966279),u=i(771347),p=i(785893);function _(e,t,i){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:s+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let g="down",m=!1,w=!0;class f extends n.Component{constructor(e){super(e),_(this,"handleMouseOver",()=>{!this.props.listResource.isFetching&&this._container&&this.setState({highlight:!1})}),_(this,"handleScroll",(0,d.Z)(()=>{if(this.props.listResource.isFetching||!this._container)return;let{handleScrollShadow:e}=this.props;e&&e((0,a.MX)(this._container)>70);let{scrollThreshold:t}=this.props,i=(0,a.aZ)(this._container)-(0,a.MX)(this._container)-(0,a.Uy)(this._container);t&&i<t&&this.fetchMore()},30)),_(this,"addEventListeners",e=>{let{useWindow:t}=this.props;t&&(e=window),this.removeEventListeners(),e&&(t||e.addEventListener("wheel",this.preventScroll),e.addEventListener("scroll",this.handleScroll),e.addEventListener("mouseover",this.handleMouseOver)),this._container=e}),_(this,"getRef",e=>e&&e.id===this.props.highlightId?this.onRefChange:null),_(this,"preventScroll",e=>{if(!this._container)return;let t=e.deltaY<0?"up":g,i=this._container.scrollHeight-this._container.scrollTop-this._container.clientHeight==0,s=0===this._container.scrollTop;(t===g&&i||"up"===t&&s)&&e.preventDefault()}),_(this,"fetchForHighlight",()=>{if(!this.state.isResourceExhausted&&!this.state.isHighlightedItemLoaded&&this.props.listResource.data){let e=!1;this.props.listResource.data.forEach(t=>{t?.id===this.props.highlightId&&(e=!0,this.setState({isHighlightedItemLoaded:!0}))}),e||this.fetchMore()}}),_(this,"onRefChange",e=>{this.setState({highlightedItemRef:e})}),_(this,"handleHighlightAndScrollToItem",()=>{this.props.listResource&&this.props.listResource.data&&!this.state.isResourceExhausted&&!this.state.isHighlightedItemLoaded&&this.fetchForHighlight(),this.state.highlightedItemRef&&!m&&(this.state.highlightedItemRef.scrollIntoView({behavior:"smooth",block:"center"}),m=!0)}),_(this,"fetchMoreIfHidden",e=>{if(this.props.listResource.auxData?.x_pinterest_sli_endpoint_name==="v3_get_news_hub_feed"){let t=c.yS;!this.props.listResource.isFetching&&!this.props.listResource.isAtEnd&&e&&this.props.getShownNewsCount(e)<t&&this.props.listResource.fetchMore()}}),this.state={highlightedItemRef:null,highlight:null,isResourceExhausted:!1,isHighlightedItemLoaded:!1}}componentWillUnmount(){this.removeEventListeners(),m&&(w=!1)}static getDerivedStateFromProps(e,t){return t.highlight?{}:{highlight:e.shouldHighlightListItem}}removeEventListeners(){let{useWindow:e}=this.props,{_container:t}=this;t&&(e||t.removeEventListener("wheel",this.preventScroll),t.removeEventListener("scroll",this.handleScroll),t.removeEventListener("mouseover",this.handleScroll))}fetchMore(){let{_container:e}=this;this.props.listResource.isFetching||(this.props.listResource.isAtEnd&&e?(e.removeEventListener("scroll",this.handleScroll),e.removeEventListener("mouseover",this.handleMouseOver),this.setState({isResourceExhausted:!0})):this.props.listResource.fetchMore())}render(){let{isAdsTab:e,isSideBarEnabled:t,hiddenNews:i,renderEmptyState:s,renderItem:o,renderTopStoryExperience:a,renderBottomSection:d,renderSectionHeaders:h}=this.props;this.props.shouldScrollToItem&&this.handleHighlightAndScrollToItem();let{data:u}=this.props.listResource;if(this.fetchMoreIfHidden(u),!this.props.listResource.isFetching&&u&&(0===this.props.getShownNewsCount(u)||0===u.length))return s();let _=u?.filter(e=>e&&"type"in e&&e?.type==="news"&&!i[e.id]),g=_?.findIndex(e=>e&&"unread"in e&&e?.unread&&(0,l.Y0)(e.encoded_display_mode,[c.gb.HIGHLIGHT_NOTIFICATION]))??-1,m=u&&-1!==g?u[g]:null,f=_?.filter(e=>e&&"unread"in e&&!e?.unread)??[],x=_?.filter((e,t)=>e&&"unread"in e&&e.unread&&t!==g)??[];return(0,p.jsxs)(r.xu,{ref:this.addEventListeners,dangerouslySetInlineStyle:{__style:{clear:"both",height:t?"100%":"calc(100% - 88px)",overflowY:"auto",overflowX:"hidden",wordBreak:"break-word"}},"data-test-id":"scrollable-container",children:[u&&a&&a(),e&&u?u.map((e,t)=>(0,p.jsx)(n.Fragment,{children:o(e,t+1,this.getRef(e),this.state.highlight&&w)},t)):null,!e&&(m||x?.length)?(0,p.jsxs)(n.Fragment,{children:[h&&(0,p.jsx)(r.xu,{marginBottom:2,marginEnd:2,marginStart:2,paddingX:2,children:(0,p.jsx)(r.X6,{accessibilityLevel:1,align:"start",size:"400",children:this.props.i18n._('New', 'Title for news hub section containing unread news items', 'Unread news hub items')})}),(0,p.jsxs)("ul",{className:"scrollableList","data-test-id":"scrollable-list",children:[m?o(m,0,this.getRef(m),this.state.highlight&&w,!0):null,x?.map((e,t)=>o(e,t,this.getRef(e),this.state.highlight&&w))]})]}):null,!e&&f&&f.length>0?(0,p.jsxs)(n.Fragment,{children:[h&&(0,p.jsx)(r.xu,{marginBottom:2,marginEnd:2,marginStart:2,paddingX:2,children:(0,p.jsx)(r.X6,{accessibilityLevel:1,align:"start",size:"400",children:this.props.i18n._('Seen', 'Title for news hub section containing read news items', 'Read news hub items')})}),(0,p.jsx)("ul",{className:"scrollableList","data-test-id":"scrollable-list",children:f.map((e,t)=>o(e,t,this.getRef(e),this.state.highlight&&w))})]}):null,this.props.listResource.isAtEnd?null:(0,p.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{padding:"5%"}},"data-test-id":"loadingItem",height:"20%",position:"relative",children:(0,p.jsx)(r.xH,{accessibilityLabel:this.props.i18n._('Loading items', ' - ', ' -- '),show:this.props.listResource.isFetching})}),d&&d()]})}componentDidMount(){(0,s.Z)("ScrollableList","/app/www/growth/news/ScrollableList/ScrollableList.tsx")}}function x(e){(0,n.useEffect)(()=>{(0,s.Z)("ScrollableList","/app/www/growth/news/ScrollableList/ScrollableList.tsx")},[]);let t=(0,o.ZP)(),{getShownNewsCount:i}=(0,h.nJ)(),{hiddenNews:r}=(0,h.mv)(),l=(0,u.Z)();return(0,p.jsx)(f,{...e,getShownNewsCount:i,hiddenNews:r,i18n:t,isSideBarEnabled:l})}_(f,"defaultProps",{scrollThreshold:400,useWindow:!1,handleScrollShadow:()=>{},highlightId:null,shouldScrollToItem:!1})},197891:function(e,t,i){i.d(t,{Z:()=>r});var s=i(483180);let n={0:s.C0,3:s.vI,4:s.YD};function r({currentSiteType:e,destinationSiteType:t,inputPath:i}){let s=Object.keys(n).includes(String(e))&&Object.keys(n).includes(String(t)),r="/"===i[0]?i:`/${i}`;return s&&t!==e?`${n[t]}${r}`:r}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/94057-df5f0350e83648b5.mjs.map