(self.modernJsonp=self.modernJsonp||[]).push([["65405"],{825730:function(e,t,r){var n=r(158612),o=r(901768),i=r(68928);e.exports=r(259770)||n.call(i,o)},901768:function(e){e.exports=Function.prototype.apply},68928:function(e){e.exports=Function.prototype.call},140319:function(e,t,r){var n=r(158612),o=r(714453),i=r(68928),a=r(825730);e.exports=function(e){if(e.length<1||"function"!=typeof e[0])throw new o("a function is required");return a(n,i,e)}},259770:function(e){e.exports="undefined"!=typeof Reflect&&Reflect&&Reflect.apply},717379:function(e,t,r){var n=r(340210),o=r(140319),i=o([n("%String.prototype.indexOf%")]);e.exports=function(e,t){var r=n(e,!!t);return"function"==typeof r&&i(e,".prototype.")>-1?o([r]):r}},96504:function(e,t,r){var n,o=r(140319),i=r(27296);try{n=[].__proto__===Array.prototype}catch(e){if(!e||"object"!=typeof e||!("code"in e)||"ERR_PROTO_ACCESS"!==e.code)throw e}var a=!!n&&i&&i(Object.prototype,"__proto__"),s=Object,p=s.getPrototypeOf;e.exports=a&&"function"==typeof a.get?o([a.get]):"function"==typeof p&&function(e){return p(null==e?e:s(e))}},24429:function(e){var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch(e){t=!1}e.exports=t},153981:function(e){e.exports=EvalError},181648:function(e){e.exports=Error},924726:function(e){e.exports=RangeError},526712:function(e){e.exports=ReferenceError},533464:function(e){e.exports=SyntaxError},714453:function(e){e.exports=TypeError},343915:function(e){e.exports=URIError},268892:function(e){e.exports=Object},417648:function(e){var t=Object.prototype.toString,r=Math.max,n=function(e,t){for(var r=[],n=0;n<e.length;n+=1)r[n]=e[n];for(var o=0;o<t.length;o+=1)r[o+e.length]=t[o];return r},o=function(e,t){for(var r=[],n=t||0,o=0;n<e.length;n+=1,o+=1)r[o]=e[n];return r},i=function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r};e.exports=function(e){var a,s=this;if("function"!=typeof s||"[object Function]"!==t.apply(s))throw TypeError("Function.prototype.bind called on incompatible "+s);for(var p=o(arguments,1),l=r(0,s.length-p.length),c=[],u=0;u<l;u++)c[u]="$"+u;if(a=Function("binder","return function ("+i(c,",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof a){var t=s.apply(this,n(p,arguments));return Object(t)===t?t:this}return s.apply(e,n(p,arguments))}),s.prototype){var d=function(){};d.prototype=s.prototype,a.prototype=new d,d.prototype=null}return a}},158612:function(e,t,r){var n=r(417648);e.exports=Function.prototype.bind||n},340210:function(e,t,r){var n,o=r(268892),i=r(181648),a=r(153981),s=r(924726),p=r(526712),l=r(533464),c=r(714453),u=r(343915),d=r(559738),y=r(876329),f=r(252264),m=r(155730),g=r(620707),A=r(763862),h=r(529550),E=Function,S=function(e){try{return E('"use strict"; return ('+e+").constructor;")()}catch(e){}},b=r(27296),v=r(24429),_=function(){throw new c},w=b?function(){try{return arguments.callee,_}catch(e){try{return b(arguments,"callee").get}catch(e){return _}}}():_,P=r(483085)(),I=r(481618),O=r(68899),R=r(410443),T=r(901768),x=r(68928),C={},N="undefined"!=typeof Uint8Array&&I?I(Uint8Array):n,M={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":P&&I?I([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":C,"%AsyncGenerator%":C,"%AsyncGeneratorFunction%":C,"%AsyncIteratorPrototype%":C,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?n:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":i,"%eval%":eval,"%EvalError%":a,"%Float16Array%":"undefined"==typeof Float16Array?n:Float16Array,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":E,"%GeneratorFunction%":C,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":P&&I?I(I([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&P&&I?I(new Map()[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":o,"%Object.getOwnPropertyDescriptor%":b,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":s,"%ReferenceError%":p,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&P&&I?I(new Set()[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":P&&I?I(""[Symbol.iterator]()):n,"%Symbol%":P?Symbol:n,"%SyntaxError%":l,"%ThrowTypeError%":w,"%TypedArray%":N,"%TypeError%":c,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":u,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet,"%Function.prototype.call%":x,"%Function.prototype.apply%":T,"%Object.defineProperty%":v,"%Object.getPrototypeOf%":O,"%Math.abs%":d,"%Math.floor%":y,"%Math.max%":f,"%Math.min%":m,"%Math.pow%":g,"%Math.round%":A,"%Math.sign%":h,"%Reflect.getPrototypeOf%":R};if(I)try{null.error}catch(e){var L=I(I(e));M["%Error.prototype%"]=L}var F=function e(t){var r;if("%AsyncFunction%"===t)r=S("async function () {}");else if("%GeneratorFunction%"===t)r=S("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=S("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var o=e("%AsyncGenerator%");o&&I&&(r=I(o.prototype))}return M[t]=r,r},B={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},U=r(158612),D=r(148824),j=U.call(x,Array.prototype.concat),Z=U.call(T,Array.prototype.splice),k=U.call(x,String.prototype.replace),H=U.call(x,String.prototype.slice),G=U.call(x,RegExp.prototype.exec),$=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,z=/\\(\\)?/g,V=function(e){var t=H(e,0,1),r=H(e,-1);if("%"===t&&"%"!==r)throw new l("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new l("invalid intrinsic syntax, expected opening `%`");var n=[];return k(e,$,function(e,t,r,o){n[n.length]=r?k(o,z,"$1"):t||e}),n},W=function(e,t){var r,n=e;if(D(B,n)&&(n="%"+(r=B[n])[0]+"%"),D(M,n)){var o=M[n];if(o===C&&(o=F(n)),void 0===o&&!t)throw new c("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new l("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new c("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new c('"allowMissing" argument must be a boolean');if(null===G(/^%?[^%]*%?$/,e))throw new l("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=V(e),n=r.length>0?r[0]:"",o=W("%"+n+"%",t),i=o.name,a=o.value,s=!1,p=o.alias;p&&(n=p[0],Z(r,j([0,1],p)));for(var u=1,d=!0;u<r.length;u+=1){var y=r[u],f=H(y,0,1),m=H(y,-1);if(('"'===f||"'"===f||"`"===f||'"'===m||"'"===m||"`"===m)&&f!==m)throw new l("property names with quotes must have matching quotes");if("constructor"!==y&&d||(s=!0),n+="."+y,D(M,i="%"+n+"%"))a=M[i];else if(null!=a){if(!(y in a)){if(!t)throw new c("base intrinsic for "+e+" exists, but the property is not available.");return}if(b&&u+1>=r.length){var g=b(a,y);a=(d=!!g)&&"get"in g&&!("originalValue"in g.get)?g.get:a[y]}else d=D(a,y),a=a[y];d&&!s&&(M[i]=a)}}return a}},483085:function(e,t,r){var n="undefined"!=typeof Symbol&&Symbol,o=r(324429);e.exports=function(){return"function"==typeof n&&"function"==typeof Symbol&&"symbol"==typeof n("foo")&&"symbol"==typeof Symbol("bar")&&o()}},324429:function(e){e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t||"[object Symbol]"!==Object.prototype.toString.call(t)||"[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(var n in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var o=Object.getOwnPropertySymbols(e);if(1!==o.length||o[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},68899:function(e,t,r){e.exports=r(268892).getPrototypeOf||null},410443:function(e){e.exports="undefined"!=typeof Reflect&&Reflect.getPrototypeOf||null},481618:function(e,t,r){var n=r(410443),o=r(68899),i=r(96504);e.exports=n?function(e){return n(e)}:o?function(e){if(!e||"object"!=typeof e&&"function"!=typeof e)throw TypeError("getProto: not an object");return o(e)}:i?function(e){return i(e)}:null},40690:function(e){e.exports=Object.getOwnPropertyDescriptor},27296:function(e,t,r){var n=r(40690);if(n)try{n([],"length")}catch(e){n=null}e.exports=n},148824:function(e,t,r){var n=Function.prototype.call,o=Object.prototype.hasOwnProperty;e.exports=r(158612).call(n,o)},559738:function(e){e.exports=Math.abs},876329:function(e){e.exports=Math.floor},543678:function(e){e.exports=Number.isNaN||function(e){return e!=e}},252264:function(e){e.exports=Math.max},155730:function(e){e.exports=Math.min},620707:function(e){e.exports=Math.pow},763862:function(e){e.exports=Math.round},529550:function(e,t,r){var n=r(543678);e.exports=function(e){return n(e)||0===e?e:e<0?-1:1}},351222:function(e,t,r){r.d(t,{Pw:()=>n,SB:()=>o,ZP:()=>a,x9:()=>i});let n=80,o=55,i=e=>"phone"===e?o:n;function a(e,t){return t?0:i(e)}},473304:function(e,t,r){r.d(t,{Z:()=>f});var n=r(281098),o=r(667294),i=r(20256),a=r(937805),s=r(667835),p=r(461951),l=r(816358),c=r(516114),u=r(15667),d=r(883379),y=r(785893);function f({children:e,footerConfig:t,headerConfig:r,height:f,hideOnScroll:m,hideOnScrollState:{isHidden:g,updateHiddenState:A},isFooterHidden:h,noPadding:E,paddingX:S,paddingY:b=c.og,type:v,zIndex:_,isStoryPin:w}){let P,I;(0,o.useEffect)(()=>{(0,n.Z)("FixedContent","/app/packages/layout/FixedContent.tsx")},[]);let{headerLimitedOverflow:O,ignoreObstructions:R,zIndexForGestaltBug:T}=r||{},{appUpsellFooterConfig:x,footerInLego:C,navFooterConfig:N}=t||{},M=!!x,L="header"===v?"top":"bottom",F=(0,s.vs)(),{isRTL:B}=(0,u.B)(),{mWebCloseupRedesignEnabled:U}=(0,a.Z)(),D=(0,o.useRef)(null),j=(0,o.useRef)(null);(0,o.useEffect)(()=>{try{if(!R){let e=D.current;j.current=O&&e&&Array.isArray(e.children)?e.children[0]:e,j.current instanceof HTMLElement&&l.Z.addObstruction(L,j.current)}}catch(e){window.console.error(e),window.console.error('Can only register impression obstructions for type "HTMLElement"')}return()=>{!R&&j.current instanceof HTMLElement&&l.Z.removeObstruction(L,j.current)}},[R,O,L,F]);let Z="top"===L?"relative":"fixed",k=E?0:b,H=(f??c.R$)+(r?.overrideTop||0),G=m||N?{transition:C||U?"transform 300ms ease-in-out, opacity 300ms ease-in-out":"transform 200ms linear",...g||h?{transform:`translateY(${"top"===L?-H:H}px)`,opacity:C||U?0:1}:Object.freeze({})}:{},$=2*!("relative"!==Z||r?.noGutter),z=$?-$:0,V=F?s.k7:"rgba(255,255,255,.95)";F&&("header"===v?P=-1:I=-1);let W=C?M?void 0:f??c.R$:"100%",J=C?c.KJ:void 0,Y=r?.isTranslucent&&V||F?V:p.Wmm,q=r?.isTransparentBackground&&p.Wyp?p.Wyp:Y,K=(0,o.useMemo)(()=>({height:"footer"===v&&U?`calc(${W} + env(safe-area-inset-bottom))`:W,...U&&"footer"===v?{paddingBottom:`calc(env(safe-area-inset-bottom) + ${4*(k||0)}px)`}:Object.freeze({})}),[U,W,v,k]),X=(0,d.Z)({skipExpActivation:!0});return(0,y.jsx)(i.xu,{ref:D,bottom:"footer"===v,dangerouslySetInlineStyle:{__style:{top:P,bottomStyle:I,...!_||T?{zIndex:T||1}:Object.freeze({}),...O?{background:"transparent",overflow:"hidden",paddingBottom:c.UB,marginBottom:-c.UB,pointerEvents:"none"}:Object.freeze({}),...r?.hasBorder?{borderBottom:c.dS}:Object.freeze({}),...t?.hasTopShadow?{boxShadow:"0 -2px 4px 1px rgba(0, 0, 0, 0.08)"}:Object.freeze({}),...G}},"data-test-id":v,display:M?"flex":void 0,height:f&&!C?f:void 0,left:!0,marginEnd:C?"auto":z,marginStart:C?"auto":z,onTransitionEnd:()=>{(m||N)&&j.current&&(g||h?l.Z.removeObstruction(L,j.current):l.Z.addObstruction(L,j.current))},position:Z,right:!0,top:"header"===v,width:C||"fixed"!==Z?void 0:"100%",zIndex:T?void 0:_,children:(0,y.jsx)(i.xu,{alignItems:t?.alignCenter?"center":void 0,dangerouslySetInlineStyle:{__style:{backgroundColor:q,paddingLeft:B||!X||w?void 0:"8px",paddingRight:B&&X&&!w?"8px":void 0,...K,boxShadow:U&&"footer"===v?`0 10px 0 0 ${q}, ${c.KJ}`:J,marginBottom:C&&!N?.docked?16:void 0,...O?{pointerEvents:"auto"}:Object.freeze({}),...r?.useRoundedCorners?{zIndex:5,borderTopRightRadius:17,borderTopLeftRadius:17,borderBottomRightRadius:0,borderBottomLeftRadius:0}:Object.freeze({})}},display:C||t?.alignCenter?"flex":void 0,marginEnd:C?"auto":void 0,marginStart:C?"auto":void 0,paddingX:S||4*("footer"===v&&!E)+$,paddingY:k,position:"relative",rounding:C&&!N?.docked?"pill":void 0,width:N?N.footerWidth:M?void 0:"100%",children:"function"==typeof e?e({updateHiddenState:A}):e})})}},588367:function(e,t,r){r.r(t),r.d(t,{default:()=>c});var n=r(281098),o=r(667294),i=r(20256),a=r(516114),s=r(473304),p=r(211887),l=r(785893);function c({hasBorder:e,headerLimitedOverflow:t,ignoreObstructions:r,isTranslucent:c,isTransparentBackground:u,noGutter:d,overrideTop:y,useRoundedCorners:f,zIndexForGestaltBug:m,isStoryPin:g,...A}){(0,o.useEffect)(()=>{(0,n.Z)("FixedHeader","/app/packages/layout/FixedHeader.tsx")},[]);let{noPadding:h,paddingY:E=a.og,zIndex:S}=A;return(0,l.jsx)(i.Le,{height:t?a.LV+2*(h?0:E)*4:void 0,top:y||0,zIndex:S||void 0,children:(0,l.jsx)(p.Z,{hideOnScroll:A.hideOnScroll,children:n=>(0,l.jsx)(s.Z,{...A,headerConfig:{isTranslucent:c,isTransparentBackground:u,headerLimitedOverflow:t,hasBorder:e,ignoreObstructions:r,noGutter:d,overrideTop:y,zIndexForGestaltBug:m,useRoundedCorners:f},hideOnScrollState:n,isStoryPin:g,type:"header"})})})}},211887:function(e,t,r){r.d(t,{Z:()=>a});var n=r(667294),o=r(159527);function i(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends n.Component{constructor(...e){super(...e),i(this,"state",{isHidden:!!this.props.appUpsellFooterConfig||!!this.props.navFooterConfig?.isDockedNavOnPlp}),i(this,"lastScrollPos",0),i(this,"updateHiddenState",e=>{this.reqAnimationId=window.requestAnimationFrame(()=>{this.setState({isHidden:e})})}),i(this,"handleScroll",(0,o.Z)(()=>{let{appUpsellFooterConfig:e,navFooterConfig:t}=this.props,{isHidden:r}=this.state,n=window.scrollY,o=n-this.lastScrollPos,i="none",{scrollHeight:a,clientHeight:s}=document.documentElement||{};Number.isNaN(a)||Number.isNaN(s)||(i=o<0?n<=Math.abs((window.scrollMinY||0)+Math.max(o,20))?"start":"none":n>=(window.scrollMaxY||a-s)-Math.max(o,20)?"end":"none");let p=55*!t?.isModal;e?o>20&&r&&n>=500?e.shouldShowAfterScroll()&&(this.updateHiddenState(!1),t?.onScroll(!1)):(o<-20&&!r||n<=p)&&(this.updateHiddenState(!0),t?.onScroll(!0)):this.props.navFooterConfig?.isDockedNavOnPlp?"start"===i&&!r||n<=p?(this.updateHiddenState(!0),t?.onScroll(!0)):(n>p||"end"===i)&&r&&(this.updateHiddenState(!1),t?.onScroll(!1)):(o<-20||"start"===i)&&r||n<=p?(this.updateHiddenState(!1),t?.onScroll(!1)):(o>20||"end"===i)&&!r&&(this.updateHiddenState(!0),t?.onScroll(!0)),this.lastScrollPos=n},30))}componentDidMount(){try{(this.props.hideOnScroll||this.props.navFooterConfig?.isDockedNavOnPlp)&&window.addEventListener("scroll",this.handleScroll)}catch(e){window.console.error(e),window.console.error('Can only register impression obstructions for type "HTMLElement"')}}componentWillUnmount(){(this.props.hideOnScroll||this.props.navFooterConfig?.isDockedNavOnPlp)&&window.removeEventListener("scroll",this.handleScroll),this.reqAnimationId&&(window.cancelAnimationFrame(this.reqAnimationId),this.reqAnimationId=null)}componentDidUpdate(e){!e.hideOnScroll&&this.props.hideOnScroll||!e.navFooterConfig?.isDockedNavOnPlp&&this.props.navFooterConfig?.isDockedNavOnPlp?(this.updateHiddenState(!0),window.addEventListener("scroll",this.handleScroll)):(e.hideOnScroll&&!this.props.hideOnScroll||e.navFooterConfig?.isDockedNavOnPlp&&!this.props.navFooterConfig?.isDockedNavOnPlp)&&(this.updateHiddenState(!1),window.removeEventListener("scroll",this.handleScroll))}render(){let{children:e,navFooterConfig:t}=this.props,{isHidden:r}=this.state;return e({isHidden:!t?.forceShow&&r,updateHiddenState:this.updateHiddenState})}}},55543:function(e,t,r){r.d(t,{Z:()=>o});var n=r(603316);function o(e,t){return new Promise((r,o)=>{if(document.querySelector(`script[src="${e}"]`)){let e=0;if("FACEBOOK"===t)if(window.FB)r();else{let t=setInterval(()=>{window.FB||20===e?(clearInterval(t),r()):(e+=1,(0,n.nP)(`mweb.loadScript.facebook.tries_${e}`,{sampleRate:.01}))},100)}else if("GSI"===t)if(window.google)r();else{let t=setInterval(()=>{window.google||20===e?(clearInterval(t),r()):(e+=1,(0,n.nP)(`mweb.loadScript.gsi.tries_${e}`,{sampleRate:.01}))},100)}else r()}else{let t=document.createElement("script");t.src=e,t.async=!0,t.addEventListener("load",()=>r()),t.addEventListener("error",o),document.getElementsByTagName("head")[0].appendChild(t)}})}},453179:function(e,t,r){r.d(t,{Mt:()=>S,NK:()=>g,P6:()=>i,UE:()=>v,ZE:()=>f,Zt:()=>m,_J:()=>l,_S:()=>A,cL:()=>d,iR:()=>h,jL:()=>p,oN:()=>o,oU:()=>b,rM:()=>y,sV:()=>c,sY:()=>u,yp:()=>a});var n=r(239728);let o=5e3,i=5e3/n.gJ,a="Pin page",s=["Uploaded by user"],p=(e,t)=>!!t&&!e,l=e=>!!e&&5!==e,c=e=>["email","messages","deep_linking"].includes(e),u=e=>!!e&&"gif"===e,d=({embedSrc:e,embedSubtype:t,embedType:r})=>!!e&&!u(r)&&"pinstory"!==t,y=({link:e,mobileLink:t,trackedLink:r,utmLink:n})=>!t&&!n&&!r&&!e,f=e=>/pin.it/gim.test(e||""),m=({link:e,mobileLink:t,origImageUrl:r,trackedLink:n,utmLink:o})=>t||o||n||e||r||"",g=(e,t)=>({deeplinkUri:{android:`pin/${e}/repin`,iOS:`repin/${e}`},mwebUri:{pathname:`/pin/${e}/repin/`,state:{trackingParams:t.state?t.state.trackingParams:""}}});function A(e){for(let t of s)if(e===t)return!1;return!0}function h(e){if(!e)return!1;let{id:t,videos:r}=e;if(t&&r?.id&&r.video_list){let{V_720P:e,V_HLSV4:t,V_HLSV3_MOBILE:n}=r.video_list;if(e&&E(e)||t&&E(t)||n&&E(n))return!0}let n=e.story_pin_data?.pages?.[0]?.blocks;if(n){for(let e of n)if("story_pin_video_block"===e.type&&e?.video)return!0}return!1}function E(e){return!!(e.thumbnail&&e.url&&e.width&&e.height)}function S(e){return e?/(?:v\/|V\/|be\/|(?:\?|&)v=|embed\/|shorts\/)([\w-]+)/.exec(e)?.[1]??null:null}function b({isVideo:e,link:t}){return!!e&&!!t&&!!/(youtu(|.)be)/.exec(t)&&!!S(t)}let v=e=>"button"in e&&1===e.button},622481:function(e,t,r){r.d(t,{Z:()=>n});let n=(0,r(667294).createContext)(null)},282803:function(e,t,r){r.d(t,{Z:()=>n});let n=(0,r(667294).createContext)(null)},255957:function(e,t,r){r.d(t,{Z:()=>N});var n=r(281098),o=r(667294),i=r(286036),a=r(457636),s=r(592109),p=r(901360),l=r(392824),c=r(67831),u=r(703393),d=r(735201),y=r(868178),f=r(891631),m=r(594885),g=r(579358),A=r(970773),h=r(361423),E=r(15667),S=r(112114),b=r(603316),v=r(785893);let _=["initial_app_load","client_route_push"],w=(0,s.XV)("PwtSurface"),P="NavigationComplete",I="VisuallyComplete",O=()=>{(0,d._T)()},R=e=>{if(e.metricConfig.constraints.every(t=>e.constraintMap[t])){let r=Math.max(...e.metricConfig.constraints.map(t=>e.constraintMap[t])),{metricConfig:{metricId:n,pwtStaticContext:o,annotateExperiments:i},annotations:s,binaryAnnotations:c,constraintMap:y,startTime:f,imageTimings:m,spans:A,traceId:h}=e;(0,l.L8)(`Report_PWT_Complete_${(0,a.KJ)(n)}`,f,r);let E=(0,u.W)({annotateExperiments:[...i??[]],annotations:s,binaryAnnotations:c,constraintMap:y,endTime:r,imageTimings:m,metricId:n,pwtStaticContext:o,startTime:f,traceId:h,spans:A});try{var t=String(E.binaryAnnotationMap["metricId.surface"].value);let e=performance.getEntriesByType("resource").filter(e=>e.name.includes("i.pinimg")).reduce((e,t)=>{let r=t.name.replace(".jpg","").split("/");return{[r[r.length-1]]:{downloadSize:t.name.split("/")[3].split("x")[0]},...e}},{});[...Array.from(document.getElementsByTagName("img")).map(t=>{let r=t.src.replace(".jpg","").split("/"),n=r[r.length-1];if(e[n]){let r=(0,g.rZ)(t)?.width||1,o=e[n].downloadSize;return{fileName:n,renderedSize:r,downloadedSize:o,ratio:o/r}}return{fileName:n,renderedSize:1,downloadedSize:1,ratio:1}}),...Array.from(document.querySelectorAll('div[role="img"]')).map(t=>{let r=t.style.backgroundImage.split('"')[1].replace(".jpg","").split("/"),n=r[r.length-1];if(e[n]&&t instanceof HTMLDivElement){let r=(0,g.rZ)(t)?.width||1,o=e[n].downloadSize;return{fileName:n,renderedSize:r,downloadedSize:o,ratio:o/r}}return{fileName:n,renderedSize:1,downloadedSize:1,ratio:1}})].forEach(e=>{let{ratio:r,fileName:n,downloadedSize:o}=e;e.ratio>1.05&&(0,p.A9)(`checkImageRatio.${t}`,{count:Math.round(10*r)/10,tags:{fileName:`${o}_${n}`}})})}catch(e){(0,p.H)("image_ratio_check_error",{error:e})}return(0,d._T)(),{...e,result:E,status:"DONE"}}return w(`Remaining constraints: ${e.metricConfig.constraints.filter(t=>!e.constraintMap[t]).join(", ")}`),e},T=(e,t)=>{let{constraint:r,time:n}=t,o=(0,a.KJ)(e.metricConfig.metricId);return h.Z?e.metricConfig.constraints.find(e=>e===r)?e.constraintMap[r]?(w(`constraint "${r}" is already complete.`),(0,p.H)("duplicated_constraint_complete",{constraint:r,action:o}),e):(w(`marking constraint "${r}" as complete ${n||performance.now()}`),n?(0,l.ZP)(`constraint_${r}_is_complete`,n):(0,l.ZP)(`constraint_${r}_is_complete`),R({...e,constraintMap:{...e.constraintMap,[r]:n||h.Z.now()}})):(w(`marked constraint "${r}" is not a required constraint.`),e):((0,p.H)("missing_window_performance",{action:o}),e)},x=(e,t)=>{if(w("dispatch action",t),"INIT_ROUTE"===t.type)return((e,t)=>{let{metricConfig:r,startTime:n,isSampled:o,disablePWTLogging:i}=t;if(i||"TIMING"!==e.status||n===e.startTime||O(),!r)return{status:"DISABLED",metricConfig:null};let s=(0,a.KJ)(r.metricId);if("TIMING"===e.status&&e.startTime===n&&e.constraintMap[P])return(0,p.H)("duplicated_init_route_action",{action:s}),e;if(!i){let e=(0,S.H)();(0,p.A9)(`handler.${s}`,{tags:{handler:e}});let t=void 0!==r.metricId.isAuthenticated&&{tags:{isAuth:r.metricId.isAuthenticated}}||void 0;"Other"===r.pwtStaticContext.browserName&&!1===r.metricId.isAuthenticated&&"initial_app_load"===r.metricId.navigationType?((0,p.A9)(`TIMING.${s}`,{tags:{userAgent:window?.navigator?.userAgent}}),(0,p.A9)(`TIMING.sampled.${s}`,{tags:{userAgent:window?.navigator?.userAgent},sampleRate:.03})):((0,p.A9)(`TIMING.${s}`),(0,p.A9)(`TIMING.sampled.${s}`,{sampleRate:.03})),(0,y.C)({resultLog:`TIMING.${s}`,annotateExperiments:r.annotateExperiments||[],getExperimentGroup:r.pwtStaticContext.getExperimentGroup,options:t})}return T({traceId:(0,d.vc)()||(0,d.ZP)("initial_app_load"===r.metricId.navigationType,r.pwtStaticContext.serverData?.trace_id),status:"TIMING",metricConfig:r,startTime:n,constraintMap:{},annotations:{},binaryAnnotations:{},imageTimings:[],isSampled:o,spans:[]},{constraint:P,disablePWTLogging:i})})(e,t.payload);if("TIMING"!==e.status)return w(`ignoring action due to invalid state ${e.status}`,t),e;switch(t.type){case"ABORT":O();let r={type:"ABORT",reason:t.reason};return{...e,status:"DONE",result:r};case"ANNOTATE":let{name:n}=t.payload;if(!h.Z)return e;let o=h.Z.now();return w(`adding annotation {${n}: ${o}}`),{...e,annotations:{...e.annotations,...{[n]:o}}};case"BINARY_ANNOTATE":let{name:i,value:s,annotationType:l}=t.payload;return w(`adding binary annotation {${i}: ${s}}`),{...e,binaryAnnotations:{...e.binaryAnnotations,...{[i]:{value:s,type:l}}}};case"MARK_CONSTRAINT_COMPLETE":return T(e,t.payload);case"REMOVE_CONSTRAINT":return((e,t)=>{if(!h.Z){let t=(0,a.KJ)(e.metricConfig.metricId);(0,p.H)("missing_window_performance",{action:t})}w(`removing constraint "${t}"`);let r=e.metricConfig.constraints.filter(e=>e!==t),{[t]:n,...o}=e.constraintMap;return R({...e,constraintMap:o,metricConfig:{...e.metricConfig,constraints:r}})})(e,t.payload);case"SET_SEGMENT":var c=t.payload;if(!h.Z){let t=(0,a.KJ)(e.metricConfig.metricId);(0,p.H)("missing_window_performance",{action:t})}w(`updating pwt segment to "${c}"`);let u={...e.metricConfig.metricId,segment:c};return{...e,metricConfig:{...e.metricConfig,metricId:u}};case"SET_VISUALLY_COMPLETE_RESULT":{let{payload:{imageTimings:r}}=t;if(0===r.length)return O(),{...e,status:"DONE",result:{type:"ABORT",reason:"visuallyComplete_noImages"}};let n=Math.max(...r.map(e=>e.responseEnd||0));return T({...e,imageTimings:r},{constraint:I,time:n})}case"ADD_SUBSPAN":let{startTime:f}=e,{payload:{name:m,startTime:g,endTime:E,annotations:b,binaryAnnotations:v,parentId:_}}=t;return{...e,spans:[...e.spans,{name:m,id:(0,A.Z)(),startTime:g||f,endTime:E,annotationMap:{...b},binaryAnnotationMap:{...v},parentId:_}]};case"START_SUBSPAN":return{...e,spans:[...e.spans,{name:t.payload.name,id:(0,A.Z)(),startTime:h.Z?h.Z.now():0,endTime:1/0,annotationMap:{...t.payload.annotations},binaryAnnotationMap:{...t.payload.binaryAnnotations},parentId:t.payload.parentId}]};case"STOP_SUBSPAN":let x=e.spans.findIndex(e=>e.name===t.payload.name);return x>-1?(e.spans[x].endTime=h.Z?h.Z.now():0,t.payload.annotations&&(e.spans[x].annotationMap={...e.spans[x].annotationMap,...t.payload.annotations}),t.payload.binaryAnnotations&&(e.spans[x].binaryAnnotationMap={...e.spans[x].binaryAnnotationMap,...t.payload.binaryAnnotations})):(0,p.H)("invalid_subspan_stop_name",{name:t.payload.name}),e;default:let C=(0,a.KJ)(e.metricConfig.metricId);return(0,p.H)("invalid_pwt_surface_action",{action:C}),e}},C=new Set;function N({children:e,...t}){(0,o.useEffect)(()=>{(0,n.Z)("PwtSurface","/app/packages/pwt-logger/PwtSurface.tsx")},[]);let r=(0,f.Z)(),s=(e=>{if(!e)return"initial_app_load";switch(e.action){case"PUSH":return"client_route_push";case"REPLACE":return"client_route_replace";default:return null}})(r),l=t.measureGridVisuallyComplete?["web_masonry_v2"]:[],u=[...t.annotateExperiments??[],...l],{context:d}=(({surface:e,constraints:t,segment:r,measureGridVisuallyComplete:n,annotateExperiments:a,customEnabledNavigationTypes:s,navigationInfo:{clientNavigation:p,navigationType:l},sampleRate:c})=>{let u=(0,o.useRef)("NOT_SET"),d=(0,m.Z)(),{getState:y,dispatch:f}=((e,t)=>{let r=(0,o.useRef)(t);return{getState:()=>r.current,dispatch:t=>{r.current=e(r.current,t)}}})(x,{status:"DISABLED",metricConfig:null}),g=(0,E.B)();if(u.current!==p&&(u.current=p,d)){let{isAuthenticated:o}=d,i=e&&l&&(s||_).includes(l)?{metricId:{type:"surface",surface:e,navigationType:l,isAuthenticated:o,segment:r},annotateExperiments:a,constraints:[P,...t||[],...n?[I]:[]],pwtStaticContext:d}:null;(0,b.nP)("webapp.pwt_surface.init_route",{tags:{surface:e,navigationType:l,isAuthenticated:o}});let u=!C.has(p);f({type:"INIT_ROUTE",payload:{metricConfig:i,startTime:p?p.time:0,isSampled:!c||Math.random()<c,disablePWTLogging:!u}}),u&&C.add(p)}let A=y();if((0,o.useEffect)(()=>()=>{C.delete(p)},[p]),(0,o.useEffect)(()=>{let e=e=>{f({type:"ABORT",reason:e})};i.Z.onSessionPause(e);let t=window.innerHeight,r=window.innerWidth,n=()=>{let e=Math.abs(window.innerHeight-t),o=Math.abs(window.innerWidth-r),i=window.innerHeight!==t,a=window.innerWidth!==r,s={handler:(0,S.H)(),deviceType:d?.deviceType??"unknown",isAuthenticated:d?.isAuthenticated??"unknown",platform:g.userAgent.platform??"unknown"};if((0,b.nP)("webapp.PwtLogger.handleResize",{sampleRate:1,tags:{...s,heightChanged:i,widthChanged:a}}),i&&(0,b.S0)("webapp.PwtLogger.resizeHeightDelta",e,{sampleRate:1,tags:s}),a&&(0,b.S0)("webapp.PwtLogger.resizeWidthDelta",o,{sampleRate:1,tags:s}),window.removeEventListener("resize",n),d?.deviceType==="phone"&&(!a&&i&&e<=150||!i&&!a)||d?.deviceType==="desktop"&&!i&&!a)return void(0,b.nP)("webapp.PwtLogger.skipResizeAbort",{sampleRate:1,tags:{...s,heightChanged:i,widthChanged:a}});f({type:"ABORT",reason:"windowResized"})};return window.addEventListener("resize",n),()=>{let t=y();w("handling unmount",t),"TIMING"===t.status&&O(),i.Z.removePauseListener(e),window.removeEventListener("resize",n)}},[]),"TIMING"!==A.status||!A.constraintMap[P])return{state:A,context:null};let{startTime:v,metricConfig:R}=A;return{state:A,context:{abort:e=>f({type:"ABORT",reason:e}),addAnnotation:e=>f({type:"ANNOTATE",payload:{name:e}}),addBinaryAnnotation:(e,t,r)=>f({type:"BINARY_ANNOTATE",payload:{name:e,value:t,annotationType:r}}),addSubspan:(e,t,r,n={},o={},i=null)=>f({type:"ADD_SUBSPAN",payload:{name:e,startTime:t,endTime:r,annotations:n,binaryAnnotations:o,parentId:i}}),getId:()=>v,getMetricId:()=>R.metricId,markConstraintComplete:e=>f({type:"MARK_CONSTRAINT_COMPLETE",payload:{constraint:e,time:h.Z?h.Z.now():0}}),removeConstraint:e=>f({type:"REMOVE_CONSTRAINT",payload:e}),setSegment:e=>f({type:"SET_SEGMENT",payload:e}),setVisuallyCompleteResult:R.constraints.includes(I)?e=>f({type:"SET_VISUALLY_COMPLETE_RESULT",payload:e}):null,startSubspan:(e,t={},r={},n=null)=>f({type:"START_SUBSPAN",payload:{name:e,annotations:t,binaryAnnotations:r,parentId:n}}),stopSubspan:(e,t={},r={},n=null)=>f({type:"STOP_SUBSPAN",payload:{name:e,annotations:t,binaryAnnotations:r,parentId:n}})}}})({...t,annotateExperiments:u,navigationInfo:{navigationType:s,clientNavigation:r}}),y=(0,c.A)(),g=!!y;return(0,o.useEffect)(()=>{if(g){let e=y?.getMetricId(),t=e?(0,a.KJ)(e):null;(0,p.H)("nested_pwt_surface",{action:t})}},[g]),(0,v.jsx)(c.S,{value:d,children:e})}},67831:function(e,t,r){r.d(t,{A:()=>o,S:()=>n});let{Provider:n,getMaybe:o}=(0,r(729434).Z)("pwtSurfaceContext")},324307:function(e,t,r){r.d(t,{ZP:()=>o,mP:()=>n});let n="…";function o(e,t=80,r=n,i=!1){let a;if(!e)return"";if(e.length<=t)return e;if(" "!==e[t-1]&&" "===e[t]||i)a=e.substring(0,t);else{let r=e.lastIndexOf(" ",t);a=e.substring(0,r)}return(a=a.replace(/[\- _,.<>:;+=*&@~\/\|!]*$/,""))+r}},576087:function(e,t,r){r.d(t,{Z:()=>o});var n=r(869273);let o=({url:e})=>{let t=(0,n.Z)("/");return 0===e.lastIndexOf(t,0)?e.substr(t.length-1):e}},239728:function(e,t,r){r.d(t,{$f:()=>o,Cy:()=>p,DR:()=>n,Fm:()=>s,bR:()=>a,gJ:()=>i,lG:()=>l});let n=1,o=2,i=1e3,a=1e3,s=1e3,p=Object.freeze({DEFAULT:0,LOAD_START:1,LOADED_METADATA:2,LOADED_DATA:3,PLAYING:4,PAUSED:5,SEEKING:6,STALLING:7,FAILED:8,ENDED:9}),l=Object.freeze({MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4})},821651:function(e,t,r){r.d(t,{r:()=>A,W:()=>g});var n=r(667294),o=r(729434),i=r(821342),a=r(886981),s=r(295317),p=r(121836),l=r(238589),c=r(974705);let u=e=>{let t={};for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&("object"!=typeof e[r]||null===e[r]||Array.isArray(e[r])?t[(0,c.Z)(r)]=e[r]:t[(0,c.Z)(r)]=u(e[r]));return t},d={profiles:new Map,headerVisible:!1,orbacVisibility:!1,activeProfile:void 0,disableProfileChanger:!1},y=(e,t)=>{switch(t.type){case"LOAD_PROFILES":return{...e,profiles:t.payload};case"SET_ACTIVE_PROFILE":return{...e,activeProfile:t.payload};case"TOGGLE_HEADER_VISIBILITY":return{...e,headerVisible:t.payload};case"TOGGLE_ORBAC_VISIBILITY":return{...e,orbacVisibility:t.payload};case"TOGGLE_DISABLE_PROFILE_CHANGER":return{...e,disableProfileChanger:t.payload};default:return e}};var f=r(785893);let{Provider:m,getMaybe:g}=(0,o.Z)("RoleBasedAccessControlContext"),A=({children:e})=>{let t=(0,i.Z)(),r=!!(t.isAuth&&t.isPartner),{state:o,actions:c,receiveProfiles:g}=(e=>{let[t,r]=(0,n.useReducer)(y,d),o=(({dispatch:e,isEnabled:t,state:r})=>{let{orbacVisibility:o,disableProfileChanger:i,headerVisible:a}=r,s=(0,n.useCallback)(r=>{t&&e({type:"SET_ACTIVE_PROFILE",payload:r})},[t,e]);return{changeProfile:s,toggleORBACVisibility:(0,n.useCallback)(r=>{t&&e({type:"TOGGLE_ORBAC_VISIBILITY",payload:r??!o})},[t,e,o]),toggleDisableProfileChanger:(0,n.useCallback)(r=>{t&&e({type:"TOGGLE_DISABLE_PROFILE_CHANGER",payload:r??!i})},[t,e,i]),toggleHeaderVisibility:(0,n.useCallback)(r=>{t&&e({type:"TOGGLE_HEADER_VISIBILITY",payload:r??!a})},[t,e,a])}})({dispatch:r,isEnabled:e,state:t}),{activeProfile:i,orbacVisibility:a}=t;return(0,n.useEffect)(()=>{let e=(0,l.Nl)().getItem(p.Zo)||!1;e&&r({type:"SET_ACTIVE_PROFILE",payload:e})},[]),(0,n.useEffect)(()=>{let e=(0,l.Nl)().getItem(p.ig)||!1;e&&r({type:"TOGGLE_ORBAC_VISIBILITY",payload:e})},[]),(0,n.useEffect)(()=>{(0,l.Nl)().setItem(p.ig,a)},[a]),(0,n.useEffect)(()=>{(0,l.Nl)().setItem(p.Zo,i)},[i]),{state:t,actions:o,receiveProfiles:(0,n.useCallback)((e,t)=>{r({type:"LOAD_PROFILES",payload:((e,t)=>{let r=[];for(let n in e)n!==t&&r.push({id:n,...u(e[n])});let n=r.sort(({user:{businessName:e}},{user:{businessName:t}})=>e.localeCompare(t)),o=new Map;for(let e of n)o.set(e.id,e);return o})(e,t)})},[r])}})(r),{activeProfile:A,headerVisible:h,profiles:E}=o,S=(0,n.useMemo)(()=>E?Array.from(E.values()):[],[E]),b=(0,s.Z)(S),v=!!t.isAuth&&S.length>0&&b,_=t.isAuth?t.id:"",w=t.isAuth?t.username:"",{changeProfile:P,toggleORBACVisibility:I,toggleDisableProfileChanger:O,toggleHeaderVisibility:R}=c;(0,n.useEffect)(()=>{if(r){if("string"==typeof b)return void P(b);A||P(_)}},[b,_,r,P,A]),(0,n.useEffect)(()=>{r&&(v&&!h&&R(!0),!v&&h&&R(!1))},[R,v,r,h,E]);let{data:T}=(0,a.Z)(r?{name:"ApiResource",options:{url:"/vx/business_access/profiles/",disable_auth_failure_redirect:!0}}:null),x=T?.profiles,C=(0,n.useMemo)(()=>t&&t.isAuth&&A===t.id?{id:t.id,permissions:["OWNER"],user:{username:w,businessName:t.fullName,imgUrl:t.imageSmallUrl}}:A&&E?E.get(A):void 0,[A,E,t,w]);(0,n.useEffect)(()=>{x&&g(x,_)},[g,x,_]);let N=(0,n.useMemo)(()=>({profiles:S,headerVisible:h,activeProfile:C,changeProfile:P,toggleORBACVisibility:I,toggleDisableProfileChanger:O,toggleHeaderVisibility:R}),[S,h,C,P,I,O,R]);return(0,f.jsx)(m,{value:N,children:e})}},448505:function(e,t,r){r.d(t,{Z:()=>p});var n=r(667294),o=r(675973),i=r(821651),a=r(295317);let s=Object.freeze({}),p=()=>{let{checkExperiment:e}=(0,o.Z)(),t=(0,i.W)(),{activeProfile:r}=t||{},p=(0,a.Z)(t?.profiles||[]),{anyEnabled:l}=e("useorbacroutematcher_in_useorbacactingas");return(0,n.useMemo)(()=>l&&!p?s:r&&(r.viewerMeetsMfaRequirement||(r.permissions||[]).includes("OWNER"))?r:s,[l,p,r])}},295317:function(e,t,r){r.d(t,{Z:()=>s});var n=r(825332),o=r(821342),i=r(506662),a=r(169053);let s=e=>{let t=(0,n.TH)(),r=(0,o.Z)(),s=(0,a.S6)(),p=(0,n.bS)("/:username"),l=p?.params?.username,c=(0,n.bS)("/pin/:id"),u=!!c?.params?.id&&s(c.params.id)?.pinner?.id;if((0,i.ej)(t))return!1;if((0,i.RU)(t)||(0,i.mY)(t))return!0;let d=[...e,...r.isAuth?[{user:{username:r.username},id:r.id}]:[]].find(e=>{if(!e)return!1;let{user:t,id:r}=e;return(!!t&&"username"in t&&!!t.username&&!!l||!!u&&!!r)&&(t.username===l||u===r)});return!!d&&d.id}},7872:function(e,t,r){r.d(t,{D3:()=>u,DX:()=>l,Fk:()=>n,KY:()=>d,Ms:()=>o,N1:()=>y,_P:()=>p,gJ:()=>i,lJ:()=>s,nl:()=>a,q6:()=>c});let n=(e,t)=>{let r=e&&e.isAuth?e.fullName:"";return e&&t&&t.user&&t.user.businessName&&(r=t.user.businessName),r},o=(e,t)=>{let r=e&&e.isAuth?e.username:"";return e&&t&&t.user&&t.user.username&&(r=t.user.username),r},i=(e,t)=>{let r=e&&e.isAuth?e.imageMediumUrl:"";return e&&t&&t.user&&t.user.imgUrl&&(r=t.user.imgUrl),r},a=(e,t)=>!!(t&&t.user&&e&&e.isAuth&&t.id!==e.id?t.user.eligibleForStlTool:e&&e.isAuth&&e.eligibleForStlTool),s=(e,t)=>e&&e.isAuth&&t&&t.id&&t.id!==e.id?t.id:"",p=(e,t,r)=>r&&r.user&&t&&t.isAuth&&r.id!==t.id?r.user.merchantId:e.advertiser?.merchant_id,l=(e,t,r)=>r&&r.user&&e.isAuth&&r.id!==e.id?r.user.scheduledPinCount||0:e.isAuth&&t&&t.scheduled_pin_count||0,c=(e,t,r)=>!!(e&&e.isAuth&&r&&r.id&&r.id!==e.id&&r.id===t),u=(e,t,r)=>!!(c(e,t,r)||e&&e.isAuth&&t===e.id),d=(e,t,r)=>u(e,t&&t.owner&&t.owner.id||"",r);function y(e,t,r){return u(e,t?t.id:"",r)}},271597:function(e,t,r){r.d(t,{AC:()=>a,FC:()=>c,FP:()=>p,M0:()=>s,SA:()=>d,Xq:()=>u,Y_:()=>i,o2:()=>o,s0:()=>n,z9:()=>l});let n=44,o=40,i=49,a=69,s=236,p=157,l=320,c=213,u=7,d=["US","GB","CA","FR","DE","AT","CH","IT","ES","AU","BR","NL","MX"]},907586:function(e,t,r){r.d(t,{_9:()=>i,o6:()=>n,tg:()=>o});let n=20,o=24,i=20},80245:function(e,t,r){r.d(t,{By:()=>c,IT:()=>l,N6:()=>o,br:()=>i,jq:()=>s,lU:()=>p,tq:()=>a});var n=r(686319);let o=(e,t)=>({type:"UPDATE_CURRENT_SEARCH",payload:{query:e,scope:t}}),i=(e,t)=>({type:"UPDATE_RECENT_SEARCHES",payload:{query:e,scope:t}}),a=e=>({type:"UPDATE_RECENT_SEARCHES_BATCH",payload:{data:e}}),s=(e,t,r)=>({type:"UPDATE_TYPEAHEAD_CACHE",payload:{items:e,term:t,recent_queries_tags:r}}),p=(e,t,r)=>o=>{(0,n.Z)({url:"/v3/search/recent/",method:"DELETE",data:{vertical:e}}).then(t,r),o("PERSONAL"===e?{type:"CLEAR_RECENT_PERSONAL_SEARCHES"}:{type:"CLEAR_RECENT_SEARCHES"})},l=(e,t,r,o,i)=>a=>{r||(0,n.Z)({url:"/v3/search/recent/",method:"DELETE",data:{query:e,vertical:t}}).then(o,i),a("PERSONAL"===t?{type:"CLEAR_RECENT_PERSONAL_SEARCH",payload:{query:e}}:{type:"CLEAR_RECENT_SEARCH",payload:{query:e}})},c=e=>t=>{t({type:"RELOAD_VISUAL_SEARCH_ANNOTATIONS",payload:{pinId:e}})}},404005:function(e,t,r){r.d(t,{Z:()=>m});var n=r(281098),o=r(667294),i=r(20256),a=r(121836),s=r(588367),p=r(15667),l=r(238589),c=r(351222),u=r(647709),d=r(785893);let y=new i.Ry(1),f=new i.H3([y]);function m({children:e,hideOnScroll:t=!1,fixedHeaderRefHeight:r,paddingY:i=0,hasBorder:y=!1,isTransparentBackground:m=!1}){(0,o.useEffect)(()=>{(0,n.Z)("SearchFixedHeader","/app/www/search/SearchFixedHeader.tsx")},[]);let g=(0,u.ZP)(),{isAuthenticated:A}=(0,p.B)(),h="true"===l.ZP.getItem(a.m5);return(0,d.jsx)(s.default,{hasBorder:y,height:t?r:void 0,hideOnScroll:t,isTransparentBackground:m,overrideTop:"tablet"===g||h?0:(0,c.ZP)(g,A),paddingY:i,zIndex:f,children:e})}},438235:function(e,t,r){r.d(t,{Z:()=>a});var n=r(616550),o=r(825332),i=r(675973);function a(){return((0,i.Z)().checkExperiment("web_react_router_v6").anyEnabled?o.UO:n.UO)()}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/65405-abcd462d8574ec59.mjs.map