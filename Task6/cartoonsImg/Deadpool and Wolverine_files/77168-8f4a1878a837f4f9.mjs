(self.modernJsonp=self.modernJsonp||[]).push([["77168"],{121366:function(e,t,a){a.d(t,{Z:()=>r});var s=a(667016);async function r(e,t){let{api:a}=(0,s.t)(),r=(0,s.u)();try{r.attempt("setMultipleBizEntityPropertiesFullUpdate",t);let s=new Date().getTime(),i=await a.put("/ads/v4/business_entities",e,!1);return r.success("setMultipleBizEntityPropertiesFullUpdate",t),r.latency("setMultipleBizEntityPropertiesFullUpdate",new Date().getTime()-s,t),i}catch(e){throw r.failure("setMultipleBizEntityPropertiesFullUpdate",t),e}}(0,s.u)()},21954:function(e,t,a){a.d(t,{m:()=>c,r:()=>_});var s=a(667294),r=a(729434),i=a(937392),n=a(675973),l=a(15667),o=a(886981),u=a(785893);let{Provider:d,get:c}=(0,r.Z)("PinRep");function _({children:e}){let{isAuthenticated:t}=(0,l.B)(),{checkExperiment:a}=(0,n.Z)(),{experience:r}=(0,i.Ow)(1000069),[c,_]=(0,s.useState)(!0),[p,E]=(0,s.useState)(!1),[S,m]=(0,s.useState)(!1),[y,T]=(0,s.useState)(null),[g,C]=(0,s.useState)(null),f=(0,i.oS)(1000069),{anyEnabled:h}=a("ap_bmi_custom_activation_nux_revamp_mweb_v2",{dangerouslySkipActivation:!0}),A=(0,o.Z)(t&&h?{name:"UserStateResource",options:{state:"QUICK_SAVES_BOARD_ID"}}:null).data;(0,s.useEffect)(()=>{if(!t)return void _(!1);r&&(!r||r?.experience_id===500417&&r?.display_data.hide_footer)?f.viewExperience(1000069,500417):_(!1),E(!0)},[r]);let N=(0,s.useMemo)(()=>({hasMetSaveRequirementOnUseCaseFeed:S,hasSimplifiedPinGridExpLoaded:p,hidePinRepFooter:c,quickSaveBoardId:A,setHasMetSaveRequirementOnUseCaseFeed:m,setUseCaseFeedOriginalPinId:C,setUseCaseFeedRepinId:T,useCaseFeedOriginalPinId:g,useCaseFeedRepinId:y}),[S,p,c,A,m,C,T,g,y]);return(0,u.jsx)(d,{value:N,children:e})}},77168:function(e,t,a){a.d(t,{H:()=>T,g:()=>y});var s=a(667294),r=a(763208),i=a(872799),n=a(414071),l=a(785873),o=a(86295),u=a(789877),d=a(729434),c=a(686319),_=a(821342),p=a(805205),E=a(572257),S=a(785893);let{Provider:m,get:y}=(0,d.Z)("BusinessHierarchyContext"),T=({children:e})=>{let[t,a]=(0,s.useState)([]),[d,y]=(0,s.useState)([]),[T,g]=(0,s.useState)(!1),[C,f]=(0,s.useState)(!1),[h,A]=(0,s.useState)(null),[N,I]=(0,s.useState)(null),[O,b]=(0,s.useState)([]),[R,D]=(0,s.useState)({}),v=(0,E.Z)(),P=(0,s.useRef)(v),x=(0,_.Z)(),w=(0,r.Z)(),M=(0,s.useRef)({}),B=(0,s.useCallback)((e,t)=>{let a;t===i.Oz.BUSINESS_HIERARCHY?a=(0,u.Z)(o.Q6.DASHBOARD,"","",e):t===i.Oz.BUSINESS_ACCOUNT&&(a=(0,u.Z)(o.Q6.DASHBOARD,e));let s=(0,p.Z)({site:"www",path:a});(0,l.Z)(s)},[]),U=x.isAuth,{id:$="",username:k="",email:L="",fullName:Z="",imageSmallUrl:j="",imageMediumUrl:G="",isAuth:F}=x.isAuth?x:{id:"",username:"",email:"",fullName:"",imageSmallUrl:"",imageMediumUrl:""},H=(0,s.useCallback)(async e=>{if(!w)return[];if(f(!0),M.current[e])return f(!1),M.current[e];{let{data:t}=(await (0,c.Z)({url:"ads/v4/business_access/business_hierarchies/",data:{search_by:["FULL_NAME","BUSINESS_ID"],search_value:e}})).resource_response,a=t&&t.map(e=>(e.children&&(e.children=e.children.map(e=>(e.user.entity_type=i.Oz.USER_ACCOUNT,e))),e))||[],s=/^\d+$/.test(e),r=RegExp(e.toLowerCase(),"g"),l=[];N||I(l=await P.current());let o=(N??l).filter(t=>s?t.id.includes(e):t.user.full_name.toLowerCase().match(r)).map(n.IT),u=[...a.map(e=>e.id),...o.map(e=>e.id)];return U&&(s?($||"").includes(e):(Z||"").toLowerCase().match(r))&&u.push($),M.current[e]=u,f(!1),u}},[w,P,U,$,Z,N]),V=async(e,t)=>{if((!F||!w||N)&&!e)return;g(!0);let s=[];try{let{data:e}=(await (0,c.Z)({url:"ads/v4/business_access/business_hierarchies/"})).resource_response;s=e&&e.map(e=>(e.children&&(e.children=e.children.map(e=>(e.user.entity_type=i.Oz.USER_ACCOUNT,e))),e))||[],a(s)}catch{a([])}try{let a=[];(!N||e)&&(a=await P.current(),y(a.filter(e=>t&&N&&!N.some(({id:t})=>t===e.id)).map(e=>e.user.full_name)),I(a));let r=e?a:N??a;b(r.map(n.IT)),D(r.reduce((e,t)=>(e[t.id]=t.business_roles||[],e),{})),A((0,n.WP)({id:$,username:k,email:L,fullName:Z,imageSmallUrl:j,imageMediumUrl:G})),M.current[""]=[...s.map(e=>e.id),...r.map(n.IT).map(e=>e.id),$],g(!1)}catch{g(!1)}},z=(0,s.useCallback)(V,[$,k,L,Z,j,G,F,w,N]),W=(0,s.useCallback)(e=>t.some(t=>t.id===e||"children"in t&&t.children.some(t=>t.id===e||t.user.id===e)),[t]),K=(0,s.useCallback)(e=>t.map(e=>"BUSINESS_HIERARCHY"===e.entity_type?e:null).find(t=>!!t&&t.children.some(t=>t.user.id===e)),[t]),q=(0,s.useCallback)(()=>{y([])},[y]),J=(0,s.useMemo)(()=>({businessHierarchies:[...h?.id&&!W(h.id)?[h]:[],...t,...O.filter(e=>!W(e.id))],switchAccount:B,searchAccounts:H,loadingAccounts:T,isSearchingAccounts:C,fetchData:z,getParentHierarchyForIdIfExists:K,viewerRolesOfEachEmployer:R,tooltipEmployers:d,hideTooltip:q}),[t,B,H,O,T,C,h,z,W,K,R,d,q]);return(0,S.jsx)(m,{value:J,children:e})}},855860:function(e,t,a){a.d(t,{r:()=>T,Z:()=>y});var s=a(667294),r=a(473354),i=a(121366),n=a(686319),l=a(667016);let o=async(e,t)=>{let{statsLog:a}=(0,l.t)();try{let s=new Date,r=await (0,n.Z)({url:"/ads/v4/business_entities",data:e,method:"POST"}),i=new Date;return a&&(a.success("getMultipleBizEntityProperties",t),a.latency("getMultipleBizEntityProperties",i.getTime()-s.getTime(),t)),r.resource_response.data}catch(e){throw a&&a.failure("getMultipleBizEntityProperties",t),e}},u=async(e,t,a="PUT")=>{let{statsLog:s}=(0,l.t)();try{let r=new Date,i=await (0,n.Z)({url:"/ads/v4/business_entities",data:e,method:a}),l=new Date;return s&&(s.success("setMultipleBizEntityPropertiesFullUpdate",t),s.latency("setMultipleBizEntityPropertiesFullUpdate",l.getTime()-r.getTime(),t)),i.resource_response.data}catch(e){throw s&&s.failure("setMultipleBizEntityPropertiesFullUpdate",t),e}};var d=a(729434),c=a(657043),_=a(821342),p=a(675973),E=a(603316),S=a(785893);let{Provider:m,get:y}=(0,d.Z)("CustomShortcutsContext"),T=({children:e})=>{let t=(0,_.Z)(),a=t.isAuth?t.id:void 0,n=t.isAuth&&t.isPartner,l=t.isAuth&&t.isLimitedLogin,d=(0,p.Z)(),[y,T]=(0,s.useState)({}),g=(0,s.useCallback)(async()=>{let{anyEnabled:e}=d.checkExperiment("aid_exp_use_fetch_api_in_custom_shortcut_context"),t=Object.freeze(["business.pinterest.com","create.pinterest.com","about.pinterest.com","support.pinterest.com","developers.pinterest.com","newsroom.pinterest.com"]).every(e=>!window.location.href?.includes(e));if(a&&n&&!l&&t)try{let t;t=e?o:r.Z;let s=(await t([{entity_id:a,entity_type:"BIZ_USER",property_keys:["NAVBAR_CONFIG"]}]))[0];if(!(s&&s.properties))return;let i=s.properties.NAVBAR_CONFIG;T(i?.customShortcuts||{})}catch(e){(0,E.nP)("pro_partner_header.dynamic_menu.shortcuts.get_error",{sampleRate:1,tags:{entity_id:a,error:(0,c.Z)(e,"message")}})}},[a,n,l,d]),C=(0,s.useCallback)(async e=>{let{anyEnabled:t}=d.checkExperiment("aid_exp_use_fetch_api_in_custom_shortcut_context");if(!a)return(0,E.nP)("pro_partner_header.dynamic_menu.shortcuts.upsert_error",{sampleRate:1,tags:{entity_id:a,error:"Auth_Error"}}),{error:"Auth_Error"};try{let s;s=t?u:i.Z;return await s([{entity_id:a,entity_type:"BIZ_USER",properties:{NAVBAR_CONFIG:{customShortcuts:e}}}]),g(),{error:null}}catch(e){return(0,E.nP)("pro_partner_header.dynamic_menu.shortcuts.upsert_error",{sampleRate:1,tags:{entity_id:a,error:(0,c.Z)(e,"message")}}),{error:"Upsert_Error"}}},[a,d,g]);(0,s.useEffect)(()=>{g()},[g]);let f=(0,s.useMemo)(()=>({shortcuts:y,upsertShortcuts:C}),[y,C]);return(0,S.jsx)(m,{value:f,children:e})}},78423:function(e,t,a){a.d(t,{H7:()=>p,CB:()=>E});var s=a(667294),r=a(729434),i=a(281098),n=a(20256),l=a(686319),o=a(982166),u=a(19585),d=a(785893);let c=({onConfirm:e})=>{(0,s.useEffect)(()=>{(0,i.Z)("EmailVerificationReminderModal","/app/packages/EmailVerificationReminderModal/EmailVerificationReminderModal.tsx")},[]);let t=(0,u.ZP)(),[a,r]=(0,s.useState)(!1),c=()=>{r(!0),(0,l.Z)({url:"/v3/users/email/verify/resend/",method:"POST"})};return(0,d.jsx)(o.ZP,{accessibilityModalLabel:t._('Verify your email', 'Accessible label for email verification being required', 'Accessible label for email verification being required'),footer:(0,d.jsxs)(n.kC,{gap:{row:2,column:0},justifyContent:"end",children:[a?(0,d.jsx)(n.zx,{color:"gray",disabled:a,fullWidth:!0,onClick:c,size:"lg",text:t._('Email sent', 'Button text for verification email being sent', 'Button text for verification email being sent')}):(0,d.jsx)(n.zx,{color:"gray",disabled:a,fullWidth:!0,onClick:c,size:"lg",text:t._('Resend email', 'Button text for resending email verification email', 'Button text for resending email verification email')}),(0,d.jsx)(n.zx,{color:"red",fullWidth:!0,onClick:e,size:"lg",text:t._('Got it', 'Button text for acknowledging email verificaiton is required', 'Button text for acknowledging email verificaiton is required')})]}),heading:t._('Verify your email', 'Accessible label for email verification being required', 'Accessible label for email verification being required'),onDismiss:e,role:"alertdialog",children:(0,d.jsx)(n.xu,{padding:8,children:(0,d.jsx)(n.xv,{align:"center",size:"300",children:t._('Keep your account secure by verifying your email address. Check the inbox associated with this account for an email from us to continue using Pinterest.', 'Inform users that they need to verify their email to keep their account secure and continue using Pinterest', 'Inform users that they need to verify their email to keep their account secure and continue using Pinterest')})})})},{Provider:_,get:p}=(0,r.Z)("EmailVerificationReminderModal");function E({children:e}){let[t,a]=(0,s.useState)(!1),r=(0,s.useMemo)(()=>({showEmailVerificationReminderModal:()=>{a(!0)}}),[]);return(0,d.jsxs)(s.Fragment,{children:[(0,d.jsx)(_,{value:r,children:e}),t&&(0,d.jsx)(c,{onConfirm:()=>{a(!1)}})]})}},789877:function(e,t,a){a.d(t,{Z:()=>i});let s="/business/business-manager/",r="/business/business-hierarchy/",i=(e,t,a,i)=>{switch(e){case"DASHBOARD":return i?`${r}${String(i)}/dashboard/`:`${s}${String(t)}/dashboard/`;case"MEDIA_NETWORK_DASHBOARD":return`${s}${String(t)}/media-network-hub/dashboard/`;case"PEOPLE":return`${s}${String(t)}/employees/`;case"PARTNERS":return`${s}${String(t)}/partners/`;case"AD_ACCOUNTS":return`${s}${String(t)}/ad-accounts/`;case"HISTORY":return`${s}${String(t)}/history/`;case"PEOPLE_DETAIL":return`${s}${String(t)}/employees/${String(a)}/details/`;case"PARTNERS_DETAIL":return`${s}${String(t)}/partners/${String(a)}/details/`;case"SHARED_PARTNERS_DETAIL":return`${s}${String(t)}/shared/${String(a)}/details/`;case"AD_ACCOUNTS_DETAIL":return`${s}${String(t)}/ad-accounts/${String(a)}/details/`;case"PENDING_AD_ACCOUNTS_DETAIL":return`${s}${String(t)}/ad-accounts/pending/${String(a)}/details/`;case"PEOPLE_PENDING_TAB":return`${s}${String(t)}/employees/pending/`;case"PARTNERS_PENDING_TAB":return`${s}${String(t)}/partners/pending/`;case"AD_ACCOUNTS_PENDING_TAB":return`${s}${String(t)}/ad-accounts/pending`;case"AD_ACCOUNTS_CEE_MIGRATION":return`${s}${String(t)}/ad-accounts/cee-migration`;case"PROFILES":return`${s}${String(t)}/profiles/`;case"PROFILES_DETAIL":return`${s}${String(t)}/profiles/${String(a)}/details/`;case"BUSINESS_SECURITY":return`${s}${String(t)}/security/`;case"ASSET_GROUPS":return a?`${s}${String(t)}/asset-groups/?asset_group_id=${String(a)}`:`${s}${String(t)}/asset-groups/`;case"INVOICE_MANAGEMENT":return`${s}${String(t)}/invoice-management/`;case"BUSINESS_HIERARCHY":return`${r}${String(i)}/hierarchy/`;case"BUSINESS_HIERARCHY_BUSINESS_SECURITY":return`${r}${String(i)}/business_security/`;case"MANAGERS":return`${r}${String(i)}/managers/`;case"AUDIENCES":return`${s}${String(t)}/audiences/`;case"SHARED_TAGS":return`${s}${String(t)}/shared-tags/`;case"CATALOGS":return`${s}${String(t)}/catalogs/`;case"CATALOGS_DETAIL":return`${s}${String(t)}/catalogs/${String(a)}/details/`;case"BRAND_SAFETY":return`${s}${String(t)}/brand-safety/`;case"BUSINESS_SETTINGS":return`${s}${String(t)}/settings/`;case"SYSTEM_USERS":return`${s}${String(t)}/system-users/`;case"APPS":return`${s}${String(t)}/apps/`;case"CONVERSION_DATA":return`${s}${String(t)}/conversion-data/`;default:return s}}},699615:function(e,t,a){a.d(t,{Z:()=>d});var s=a(281098),r=a(667294),i=a(20256),n=a(32937),l=a(87853),o=a(647709),u=a(785893);function d({children:e}){(0,r.useEffect)(()=>{(0,s.Z)("ToastManager","/app/packages/ui/ToastManager.tsx")},[]);let[t,a]=(0,r.useState)([]),d=(0,r.useRef)(0),c=(0,o.ZP)(),_=()=>{let e=d.current;return d.current+=1,`toast${e}`},p=(0,r.useMemo)(()=>({showOneToast:e=>{a([{name:_(),component:e}])},showToast:e=>{a(t=>[...t,{name:_(),component:e}])}}),[a]);return(0,u.jsxs)(l.Zo,{value:p,children:[e,(0,u.jsx)(n.Z,{children:(0,u.jsx)(i.mh,{children:(0,u.jsx)(i.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{pointerEvents:"none",..."desktop"===c?{bottom:"14px"}:{top:"phone"===c?56:80}}},direction:"column",display:"flex",justifyContent:"center",position:"fixed",width:"100%",zIndex:new i.Ry(1500),children:t.map(({name:e,component:t})=>{if(t)return(0,u.jsx)(t,{hideToast:()=>{a(t=>{let a=[...t],s=a.findIndex(t=>t.name===e);return -1!==s&&a.splice(s,1),a})}},e)})})})})]})}},572257:function(e,t,a){a.d(t,{Z:()=>r});var s=a(686319);function r(){return async()=>{let e=await (0,s.Z)({url:"/ads/v4/business_access/businesses/me/employers/"}),t=e.resource_response?e.resource_response.data:{data:[]};return await Promise.all(t&&t.data||[])}}},947956:function(e,t,a){a.d(t,{$7:()=>y,Ay:()=>l,B1:()=>g,CD:()=>u,Dk:()=>_,Fc:()=>w,Kp:()=>M,NG:()=>N,QM:()=>D,T0:()=>c,TE:()=>m,WF:()=>h,Wm:()=>C,Xm:()=>I,_N:()=>R,d7:()=>n,dt:()=>P,e_:()=>b,i_:()=>A,kY:()=>S,nV:()=>r,pC:()=>o,ph:()=>E,qg:()=>O,sg:()=>p,tZ:()=>i,tw:()=>x,uC:()=>d,uc:()=>f,xl:()=>T,yG:()=>v});var s=a(349427);let r="https://business.pinterest.com/en/pinterest-advertising-services-agreement",i="https://business.pinterest.com/fr/pinterest-advertising-services-agreement",n="https://business.pinterest.com/pt-br/pinterest-advertising-services-agreement",l="https://business.pinterest.com/es/pinterest-advertising-services-agreement/mexico/",o="https://business.pinterest.com/es/pinterest-advertising-services-agreement/argentina/",u="https://business.pinterest.com/es/pinterest-advertising-services-agreement/chile/",d="https://business.pinterest.com/es/pinterest-advertising-services-agreement/colombia/",c="https://business.pinterest.com/ja/pinterest-advertising-services-agreement/",_="https://business.pinterest.com/en-gb/pinterest-advertising-services-agreement",p="https://business.pinterest.com/pinterest-advertising-services-agreement/",E=[1,3],S=[7],m=[34],y=[35],T=[19],g=[36],C=[37],f=[38],h=8,A=9,N=11,I=15,O=16,b=17,R=18,D=19,v=20,P=22,x=23;function w(e,t){let a=A;return E.includes(e)&&!t?a=h:S.includes(e)?a=N:m.includes(e)?a=I:y.includes(e)?a=O:T.includes(e)?a=b:g.includes(e)?a=R:f.includes(e)?a=D:C.includes(e)?a=v:s.f4.includes(e)&&(a=P),a}function M(e){let t=_;return E.includes(e)?t=r:S.includes(e)?t=i:m.includes(e)?t=n:y.includes(e)?t=l:T.includes(e)?t=c:g.includes(e)?t=o:C.includes(e)?t=u:f.includes(e)&&(t=d),t}},642483:function(e,t,a){a.d(t,{a:()=>_,B:()=>d});var s=a(667294),r=a(729434),i=a(686319);let n={boardMap:{}};function l(e,t){if(e=e||n,"BLOCKING_ACTIONS_UPDATED"===t.type){let{payload:{boardId:a,blockingActions:s}}=t,r=null,i=null,n={};return s.forEach(({section_id:e,progress:t,id:a,created_timestamp:s})=>{let l={id:a,createdAt:s,progress:t};e?"-1"===e?r=l:n[e]=l:i=l}),{...e,boardMap:{...e.boardMap,[a]:{wholeBoard:r,unorganized:i,sectionMap:n}}}}return e}var o=a(785893);let{Provider:u,getMaybe:d}=(0,r.Z)("BlockingAction");async function c(e){let t=await (0,i.Z)({url:`/v3/boards/${e}/`,data:{fields:["board.id","board.blocking_actions"]}});return new Promise((e,a)=>{let s=t&&t.resource_response&&t.resource_response.data&&t.resource_response.data.blocking_actions;if(!s)return void a(Error("No blocking actions found in the response"));e(s)})}function _({children:e}){let[t,a]=(0,s.useReducer)(l,n),r=(0,s.useCallback)(e=>c(e).then(t=>(a({type:"BLOCKING_ACTIONS_UPDATED",payload:{boardId:e,blockingActions:t}}),t)),[]),i=(0,s.useMemo)(()=>({blockingActions:t,fetchBlockingActions:r}),[t,r]);return(0,o.jsx)(u,{value:i,children:e})}},199593:function(e,t,a){a.d(t,{Z:()=>i,k:()=>s});let{Provider:s,get:r}=(0,a(729434).Z)("Conversations"),i=r},181444:function(e,t,a){a.d(t,{R:()=>c,U:()=>d});var s=a(667294),r=a(729434),i=a(686319);let n={modalOpen:!1,modalTitle:"",isSubmitting:!1,submissionComplete:!1,submissionFailure:"",actionFrom:"",prompt:"",nextPageToRedirect:""},l=(e,t)=>{switch(e=e||n,t.type){case"SHOW_IN_SITE_FEEDBACK_MODAL":return{...e,modalOpen:!0,modalTitle:t.payload.title??"",actionFrom:t.payload.actionFrom??"",nextPageToRedirect:t.payload.nextPageToRedirect??"",prompt:t.payload.prompt??""};case"REMOVE_IN_SITE_FEEDBACK_MODAL":return{...e,modalOpen:!1,modalTitle:"",isSubmitting:!1,submissionComplete:!1,submissionFailure:""};case"IN_SITE_FEEDBACK_STARTED_STARTED":return{...e,isSubmitting:!0,submissionComplete:!1,submissionFailure:""};case"IN_SITE_FEEDBACK_SUBMIT_SUCCEEDED":return{...e,isSubmitting:!1,submissionComplete:!0,submissionFailure:""};case"IN_SITE_FEEDBACK_SUBMIT_FAILED":return{...e,isSubmitting:!1,submissionComplete:!1,submissionFailure:t.payload.error};default:return e}};var o=a(785893);let{Provider:u,get:d}=(0,r.Z)("InSiteFeedback");function c({children:e}){let[t,a]=(0,s.useReducer)(l,n),r=(0,s.useCallback)((e,t,s,r)=>a({type:"SHOW_IN_SITE_FEEDBACK_MODAL",payload:{title:t,prompt:s,actionFrom:e,nextPageToRedirect:r}}),[]),d=(0,s.useCallback)(()=>a({type:"REMOVE_IN_SITE_FEEDBACK_MODAL",payload:{}}),[]),c=(0,s.useCallback)(()=>a({type:"IN_SITE_FEEDBACK_STARTED_STARTED",payload:{}}),[]),_=(0,s.useCallback)(()=>a({type:"IN_SITE_FEEDBACK_SUBMIT_SUCCEEDED",payload:{}}),[]),p=(0,s.useCallback)(e=>a({type:"IN_SITE_FEEDBACK_SUBMIT_FAILED",payload:{error:e}}),[]),E=(0,s.useCallback)(e=>{if(a({type:"IN_SITE_FEEDBACK_STARTED_STARTED",payload:{}}),!e.verbatim_text||0===e.verbatim_text.trim().length)return void a({type:"IN_SITE_FEEDBACK_SUBMIT_SUCCEEDED",payload:{}});(0,i.Z)({url:"/v3/analytics/feedback/",method:"POST",data:{feedback_data:JSON.stringify(e)}}).then(()=>{a({type:"IN_SITE_FEEDBACK_SUBMIT_SUCCEEDED",payload:{}})}).catch(e=>{a({type:"IN_SITE_FEEDBACK_SUBMIT_FAILED",payload:{error:e.message}})})},[]),S=(0,s.useMemo)(()=>({inSiteFeedback:t,showInSiteFeedbackModal:r,removeInSiteFeedbackModal:d,submitInSiteFeedbackStarted:c,inSiteFeedbackSubmitSucceeded:_,inSiteFeedbackSubmitFailed:p,submitInSiteFeedback:E}),[t,r,d,c,_,p,E]);return(0,o.jsx)(u,{value:S,children:e})}},710408:function(e,t,a){a.d(t,{P:()=>_,u:()=>c});var s=a(667294),r=a(729434);let i={fullName:"",email:"",phoneNumber:"",zipCode:"",formSubmissions:{}};function n(e,t){switch(e=e||i,t.type){case"AUTOFILL_LEADGEN_USER_INFO":return{...e,fullName:t.payload.fullName,email:t.payload.email};case"SET_LEADGEN_USER_INFO":return{...e,formSubmissions:t.payload.formSubmissions};default:return e}}var l=a(15667),o=a(886981),u=a(785893);let{Provider:d,get:c}=(0,r.Z)("LeadGen");function _({children:e}){let{isLoaded:t,data:a}=(()=>{let{isAuthenticated:e}=(0,l.B)();return(0,o.Z)(e?{name:"ApiResource",options:{url:"/v3/users/me/",data:{fields:["user.full_name","user.email","user.is_name_eligible_for_lead_form_autofill","user.is_email_eligible_for_lead_form_autofill"]}}}:null)})(),[r,c]=(0,s.useReducer)(n,i),_=(0,s.useCallback)(e=>c({type:"SET_LEADGEN_USER_INFO",payload:e}),[]);(0,s.useEffect)(()=>{t&&c({type:"AUTOFILL_LEADGEN_USER_INFO",payload:{...i,fullName:a?.is_name_eligible_for_lead_form_autofill?a.full_name:"",email:a?.is_email_eligible_for_lead_form_autofill?a.email:""}})},[t,a]);let p=(0,s.useMemo)(()=>({updateLeadGenInfo:_,leadGen:r}),[_,r]);return(0,u.jsx)(d,{value:p,children:e})}},969395:function(e,t,a){a.d(t,{Z:()=>k});var s=a(281098),r=a(667294),i=a(21954),n=a(184954),l=a(77168),o=a(855860),u=a(78423),d=a(675973),c=a(792171),_=a(164444),p=a(642483),E=a(464876),S=a(575108),m=a(657043),y=a(791948),T=a(991384);let g=(e,t)=>e.data[t]&&e.data[t].messages||[];function C(e,t){let a=new Map;for(let s of e){if(!s)continue;let e=t(s);if(a.has(e)){let t=(0,T.Z)(a.get(e),s);a.set(e,t)}else a.set(e,s)}return[...a.values()]}function f(e){return[...e].sort((e,t)=>new Date(e.created_ms||e.created_at).getTime()-new Date(t.created_ms||t.created_at).getTime())}function h(e,t,a){return f(C(g(e,t).concat(a),e=>e.id))}let A={conversationsUnseenCount:0,data:{},newsHubCount:0,open:null,objectAttachment:null,showConversationsDropdown:!1,showNewMessageView:!1,ui:{},unread:0};function N(e,t){if(e=e||A,"CONVERSATION_OPEN"===t.type)return{...e,open:t.payload.id,objectAttachment:null,showNewMessageView:!1,ui:{...e.ui,[t.payload.id]:{contactRequestId:t.payload.contactRequestId||"",isPreview:t.payload.isPreview}}};if("CONVERSATION_CLOSE"===t.type)return{...e,open:null,objectAttachment:null,showNewMessageView:!1,ui:{...e.ui,[t.payload.id]:{contactRequestId:t.payload.contactRequestId||"",isPreview:!!t.payload.contactRequestId,isDeclined:t.payload.isDeclined}}};if("CONVERSATION_CREATE"===t.type){let{id:a}=t.payload;return{...e,data:{...e.data,[a]:{...e.data[a]||{},...t.payload}}}}if("CONVERSATION_DELETE"===t.type){let a={...e,data:{...e.data}},{id:s}=t.payload;return delete a.data[s],a}if("FETCH_COMPLETE"===t.type){let{options:a,resource:s,response:r}=t.payload,i=r.resource_response.data;if("ConversationMessagesResource"===s){let t=i||[],s=a?.conversation_id||"",r=h(e,s,t),n=r[r.length-1];return{...e,data:{...e.data,[s]:{...e.data[s],id:s,messages:r,unread:0,last_message:n}}}}if("ConversationsResource"===s){let t=i||[],a={...e,data:{...e.data}};return t.forEach(e=>{let{id:t,created_at:s,name:r,board:i,emails:n,unread:l,users:o,last_message:u}=e,d=h(a,t,[u]);a.data[t]={...a.data[t],id:t,created_at:s,name:r,board:i,emails:n||[],unread:l||0,users:o||[],last_message:u,messages:d}}),a}if("ConversationResource"===s){let t=i||{},{id:a}=t,s={...e,data:{...e.data}};return a&&(s.data[a]={...s.data[a],...t}),s}if("NewsHubBadgeResource"===s&&i){let t=i.conversations_unseen_count||0;return{...e,unread:t}}}else if("MESSAGE_SEND_PENDING"===t.type){let{id:a,message:s}=t.payload;if(e.data[a])return{...e,data:{...e.data,[a]:{...e.data[a],id:a,messages:[...e.data[a].messages,s]}}}}else if("MESSAGE_SEND_PENDING_SUCCESS"===t.type){let{id:a,tempMessage:s,newMessage:r}=t.payload;if(e.data[a]&&g(e,a).find(e=>e.id===s.id&&e.created_ms===s.created_ms)){let t=f(C(g(e,a).filter(e=>e.id!==s.id).concat([r]),e=>e.id));return{...e,data:{...e.data,[a]:{...e.data[a],last_message:r,messages:t}}}}}else if("MESSAGE_SEND_PENDING_FAILURE"===t.type){let{id:a,tempMessageId:s}=t.payload;if(e.data[a]){let t=g(e,a).filter(e=>e.id!==s);return{...e,data:{...e.data,[a]:{...e.data[a],messages:t}}}}}else if("MESSAGE_DELETE"===t.type){let{id:a,messageId:s}=t.payload;if(e.data[a]){let t=g(e,a).map(e=>e.id===s?{...e,deleted_by:2}:e);return{...e,data:{...e.data,[a]:{...e.data[a],messages:t}}}}}else if("OPEN_NEW_MESSAGE"===t.type){let{objectAttachment:a}=t.payload||null;return{...e,showNewMessageView:!0,open:null,objectAttachment:a}}else if("CLOSE_DROPDOWN"===t.type)return{...e,showConversationsDropdown:!1,objectAttachment:null,showNewMessageView:!1};else if("OPEN_DROPDOWN"===t.type)return{...e,showConversationsDropdown:!0};else if("UPDATE_NEWSHUB_COUNT"===t.type)return{...e,newsHubCount:t.payload};else if("UPDATE_UNREAD_COUNT"===t.type)return{...e,conversationsUnseenCount:t.payload};else if("CLEAR_MESSAGE_BADGE"===t.type){let{id:a}=t.payload;return{...e,data:{...e.data,[a]:{...e.data[a],unread:0}}}}else if("CONVERSATION_SAVE_POSITION"===t.type){let{id:a,position:s}=t.payload;return{...e,data:{...e.data,[a]:{...e.data[a],position:s}}}}else if("CONVERSATION_RESET_POSITION"===t.type){let{id:a}=t.payload;return{...e,data:{...e.data,[a]:{...e.data[a],position:null}}}}else if("SET_OBJECT_ATTACHMENT"===t.type){let{objectAttachment:a}=t.payload;return{...e,objectAttachment:a}}else if("REMOVE_OBJECT_ATTACHMENT"===t.type)return{...e,objectAttachment:null};return e}var I=a(199593),O=a(785893);function b({children:e}){(0,r.useEffect)(()=>{(0,s.Z)("ConversationsContext","/app/www/ConversationsContext/ConversationsContext.tsx")},[]);let[t,a]=(0,r.useReducer)(N,A),i=(0,r.useCallback)(e=>a({type:"FETCH_COMPLETE",payload:e}),[]);(0,y.Z8)("ConversationMessagesResource",i),(0,y.my)("ConversationMessagesResource",i),(0,y.Z8)("ConversationsResource",i),(0,y.Z8)("ConversationResource",i),(0,y.Z8)("NewsHubBadgeResource",i);let n=(0,r.useCallback)((e,t=!1,s="")=>a({type:"CONVERSATION_OPEN",payload:{id:e,isPreview:t,contactRequestId:s}}),[]),l=(0,r.useCallback)((e,t="",s=!1)=>a({type:"CONVERSATION_CLOSE",payload:{id:e,contactRequestId:t,isDeclined:s}}),[]),o=(0,r.useCallback)(e=>a({type:"CONVERSATION_CREATE",payload:e}),[]),u=(0,r.useCallback)(e=>a({type:"CONVERSATION_DELETE",payload:{id:e}}),[]),d=(0,r.useCallback)((e,t)=>a({type:"CONVERSATION_SAVE_POSITION",payload:{id:e,position:t}}),[]),c=(0,r.useCallback)(e=>a({type:"CONVERSATION_RESET_POSITION",payload:{id:e}}),[]),_=(0,r.useCallback)((e,t,s)=>{S.Z.create("ConversationsResource",{user_ids:e,emails:t,text:""}).callCreate().then(e=>{a({type:"CONVERSATION_OPEN",payload:{id:(e&&e.resource_response.data).id}})}).catch(e=>{s((0,m.Z)(e,"message_detail")||(0,m.Z)(e,"message")||"")})},[]),p=(0,r.useCallback)(()=>{a({type:"CLOSE_DROPDOWN"})},[]),E=(0,r.useCallback)(()=>{a({type:"OPEN_DROPDOWN"})},[]),T=(0,r.useCallback)(e=>{a({type:"OPEN_NEW_MESSAGE",payload:{objectAttachment:e}})},[]),g=(0,r.useCallback)((e,t)=>a({type:"MESSAGE_SEND_PENDING",payload:{id:e,message:t}}),[]),C=(0,r.useCallback)((e,t,s)=>a({type:"MESSAGE_SEND_PENDING_SUCCESS",payload:{id:e,tempMessage:t,newMessage:s}}),[]),f=(0,r.useCallback)((e,t)=>a({type:"MESSAGE_SEND_PENDING_FAILURE",payload:{id:e,tempMessageId:t}}),[]),h=(0,r.useCallback)((e,t)=>a({type:"MESSAGE_DELETE",payload:{id:e,messageId:t}}),[]),b=(0,r.useCallback)(e=>a({type:"UPDATE_NEWSHUB_COUNT",payload:e}),[]),R=(0,r.useCallback)(e=>a({type:"UPDATE_UNREAD_COUNT",payload:e}),[]),D=(0,r.useCallback)(e=>a({type:"CLEAR_MESSAGE_BADGE",payload:{id:e}}),[]),v=(0,r.useCallback)(e=>a({type:"SET_OBJECT_ATTACHMENT",payload:{objectAttachment:e}}),[]),P=(0,r.useCallback)(()=>a({type:"REMOVE_OBJECT_ATTACHMENT"}),[]),x=(0,r.useMemo)(()=>({clearMessageBadge:D,conversationOpen:n,conversationClose:l,conversationCreate:o,conversationDelete:u,conversationGet:_,saveConversationPosition:d,resetConversationPosition:c,dropdownClose:p,dropdownOpen:E,newMessageOpen:T,pendingMessageSend:g,pendingMessageSuccess:C,pendingMessageFailure:f,deleteMessage:h,updateNewsHubCount:b,updateUnreadCount:R,conversations:t,setObjectAttachment:v,removeObjectAttachment:P}),[D,n,l,o,u,_,d,c,p,E,T,g,C,f,h,b,R,t,v,P]);return(0,O.jsx)(I.k,{value:x,children:e})}var R=a(161343);function D({children:e}){(0,r.useEffect)(()=>{(0,s.Z)("EducationProvider","/app/www/Education/EducationProvider.tsx")},[]);let[t,a]=(0,r.useState)(null),i=(0,r.useMemo)(()=>[t,a],[t]);return(0,O.jsx)(R.Z,{value:i,children:e})}var v=a(181444),P=a(710408),x=a(859685),w=a(314011),M=a(493812),B=a(702574),U=a(889539),$=a(666811);function k({children:e}){(0,r.useEffect)(()=>{(0,s.Z)("AuthDesktopProviders","/app/www/PageWrapper/AuthDesktopProviders.tsx")},[]);let t=(0,d.Z)().checkExperiment("aid_exp_move_custom_shortcuts_context_provider").anyEnabled?r.Fragment:o.r;return(0,O.jsx)(b,{children:(0,O.jsx)(c.W,{children:(0,O.jsx)(B.l,{children:(0,O.jsx)(D,{children:(0,O.jsx)($.X,{children:(0,O.jsx)(P.P,{children:(0,O.jsx)(U.j,{children:(0,O.jsx)(v.R,{children:(0,O.jsx)(u.CB,{children:(0,O.jsx)(E.sO,{children:(0,O.jsx)(n.FE,{children:(0,O.jsx)(l.H,{children:(0,O.jsx)(t,{children:(0,O.jsx)(M.yh,{children:(0,O.jsx)(i.r,{children:(0,O.jsx)(w.C,{children:(0,O.jsx)(p.a,{children:(0,O.jsx)(x.xM,{children:(0,O.jsx)(_.i,{children:e})})})})})})})})})})})})})})})})})})})}},702574:function(e,t,a){a.d(t,{l:()=>d,o:()=>u});var s=a(667294),r=a(729434),i=a(791948);function n(e,t){if(e=e||{},"SUGGESTIONS_FETCH_COMPLETE"===t.type){let{payload:a}=t;if("ShareSuggestionsResource"===a.resource){let s=t.payload.response.resource_response.data||[],{term:r=""}=a.options??{};return{...e,[r]:s}}if("ShareSuggestionsTypeaheadResource"===a.resource){let s=(t.payload.response.resource_response.data||{}).items||[],{term:r=""}=a.options??{};return{...e,[r]:s}}}return e}var l=a(785893);let{Provider:o,get:u}=(0,r.Z)("ShareSuggestions");function d({children:e}){let[t,a]=(0,s.useReducer)(n,{}),r=e=>{a({type:"SUGGESTIONS_FETCH_COMPLETE",payload:e})};(0,i.Z8)("ShareSuggestionsResource",r),(0,i.Z8)("ShareSuggestionsTypeaheadResource",r);let u=(0,s.useMemo)(()=>({shareSuggestions:t}),[t]);return(0,l.jsx)(o,{value:u,children:e})}},889539:function(e,t,a){a.d(t,{l:()=>u,j:()=>d});var s=a(667294),r=a(729434);let i={currentPinDraftId:null,mostRecentTaggedObjectId:null,selectedStlItemId:null,stlCallout:{showCallout:!1},stlTaggedCoords:null,stlHoveredTaggedObjectId:null},n=(e,t)=>{switch(e=e||i,t.type){case"STL_SELECT":return{...e,selectedStlItemId:t.payload.selectedStlItemId};case"STL_SHEET":return{...e,currentPinDraftId:t.payload.currentPinDraftId};case"STL_TAGGED_PIN":return{...e,stlTaggedCoords:t.payload.stlTaggedCoords};case"STL_ERROR_STATE":return{...e,stlCallout:{showCallout:t.payload.stlCallout.showCallout,type:t.payload.stlCallout.type}};case"STL_MOST_RECENT_TAGGED_OBJECT_ID":return{...e,mostRecentTaggedObjectId:t.payload.mostRecentTaggedObjectId};case"SET_STL_HOVERED_TAGGED_OBJECT_ID":return{...e,stlHoveredTaggedObjectId:t.payload.stlHoveredTaggedObjectId};default:return e}};var l=a(785893);let{Provider:o,get:u}=(0,r.Z)("ShopTheLook");function d({children:e}){let[t,a]=(0,s.useReducer)(n,i),r=(0,s.useMemo)(()=>({shopTheLook:t,setStlSelection:e=>{a({type:"STL_SELECT",payload:{selectedStlItemId:e}})},setCurrentPinDraftId:e=>{a({type:"STL_SHEET",payload:{currentPinDraftId:e}})},setStlTaggedCoord:e=>{a({type:"STL_TAGGED_PIN",payload:{stlTaggedCoords:e}})},setStlCallout:({showCallout:e,type:t})=>{a({type:"STL_ERROR_STATE",payload:{stlCallout:{showCallout:e,type:t}}})},setMostRecentTaggedObjectId:e=>{a({type:"STL_MOST_RECENT_TAGGED_OBJECT_ID",payload:{mostRecentTaggedObjectId:e}})},setStlHoveredTaggedObjectId:e=>{a({type:"SET_STL_HOVERED_TAGGED_OBJECT_ID",payload:{stlHoveredTaggedObjectId:e}})}}),[t]);return(0,l.jsx)(o,{value:r,children:e})}},666811:function(e,t,a){a.d(t,{X:()=>d,Z:()=>u});var s=a(667294),r=a(729434),i=a(453179);function n(e=null,t){switch(t.type){case"REPORT_CONTENT_SHOW":return{id:t.payload.id,auxData:t.payload.auxData,isProduct:t.payload.isProduct,isPromoted:t.payload.isPromoted,parentId:t.payload.parentId,videoDuration:t.payload.videoDuration,viewParameter:t.payload.viewParameter,viewType:t.payload.viewType,type:t.payload.type,isThirdPartyAd:t.payload.isThirdPartyAd,nodeId:t.payload.nodeId};case"REPORT_CONTENT_DISMISS":return null;default:return e}}var l=a(785893);let{Provider:o,get:u}=(0,r.Z)("ReportData");function d({children:e}){let[t,a]=(0,s.useReducer)(n,null),r=(0,s.useCallback)(()=>a({type:"REPORT_CONTENT_DISMISS"}),[]),u=(0,s.useCallback)((e,t,s)=>a({type:"REPORT_CONTENT_SHOW",payload:{id:e,isProduct:!1,isPromoted:!1,parentId:t,videoDuration:null,viewParameter:null,viewType:null,type:s,nodeId:null}}),[]),d=(0,s.useCallback)((e,t,s)=>a({type:"REPORT_CONTENT_SHOW",payload:{id:e,isProduct:!1,isPromoted:!1,videoDuration:null,viewParameter:t,viewType:s,type:"conversation",nodeId:null}}),[]),c=(0,s.useCallback)(({id:e,viewParameter:t,viewType:s,nodeId:r})=>a({type:"REPORT_CONTENT_SHOW",payload:{id:e,isProduct:!1,isPromoted:!1,videoDuration:null,viewParameter:t,viewType:s,type:"pin",nodeId:r}}),[]),_=(0,s.useCallback)(({pinId:e,isDownstreamPromotion:t,hasPromoter:s,firstVideoDuration:r,isProduct:n,viewParameter:l,viewType:o,isThirdPartyAd:u,nodeId:d,auxData:c})=>{a({type:"REPORT_CONTENT_SHOW",payload:{id:e,auxData:c,isProduct:n,isPromoted:(0,i.jL)(t,s),videoDuration:r,viewParameter:l,viewType:o,type:"pin",isThirdPartyAd:u,nodeId:d}})},[]),p=(0,s.useMemo)(()=>({reportData:t,dismiss:r,reportComment:u,reportConversation:d,reportImage:c,reportPin:_}),[t,r,u,d,c,_]);return(0,l.jsx)(o,{value:p,children:e})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/77168-8f4a1878a837f4f9.mjs.map