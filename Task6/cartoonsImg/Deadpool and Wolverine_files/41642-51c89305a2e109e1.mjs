(self.modernJsonp=self.modernJsonp||[]).push([["41642"],{667835:function(e,t,i){i.d(t,{F6:()=>f,Hs:()=>v,N$:()=>h,OW:()=>u,Ov:()=>p,Yc:()=>g,k7:()=>d,t4:()=>m,vs:()=>b});var n=i(667294),r=i(111330),s=i(15667),o=i(753143),a=i(941404),c=i(647709);let l="dark",d="rgba(17, 17, 17, 1)",u="rgba(17, 17, 17, 0)",h="rgb(43, 43, 43)",p="#767676",m="rgba(0,0,0, 0.8)",g=()=>(0,o.M0)().getItem(r.wg)===l;function b(){let e=(0,c.ml)(),{theme:t,isAuthenticated:i,referrerFromCookie:r}=(0,s.B)(),o=e&&t===l,[a,d]=(0,n.useState)(o);return(0,n.useEffect)(()=>{let e=o||i&&g();e&&(document.body.style.backgroundColor="#111111"),d(e)},[d,e,o,i,r]),a}let v=()=>{(0,o.M0)().setItem(r.wg,l),(0,a.My)("mweb.dark_mode.enable"),window.location.reload()},f=()=>{(0,o.M0)().removeItem(r.wg),(0,a.My)("mweb.dark_mode.disable"),window.location.reload()}},211079:function(e,t,i){i.d(t,{U:()=>a,Z:()=>c});var n=i(97776),r=i(531014);function s(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let o={start:["active","paused","end"],active:["active","end","paused"],paused:["resumed","paused","end"],resumed:["active","end","paused"],end:[],unknown:["start"]},a=(e,t)=>`${e}->${t}`;class c{constructor(e,t,i,o,c,l=null,d=[],u=null){s(this,"inView",!1),s(this,"state","unknown"),s(this,"lastInitiator",null),s(this,"endReason",null),s(this,"intersectionTrigger",([e])=>{let t=this.inView;(0,n.q4)(()=>{e?.isIntersecting?this.inView=!0:this.inView=!1,this.addTimeStamp("IntersectionObserver",this.inView,0===this.timeline.length?"start":"active"),r.ck.log(`[Experience Sessions] - ${this.inView?"ðŸ‘ï¸ In View":"âŒ Out of View"}`)},"IntersectionObserver",void 0,this.id,()=>{this.inView=t})()}),s(this,"handleTransitionEdgeCases",(e,t,i,n)=>{let s=a(e,t);return"paused->active"===s&&"IntersectionObserver"===i&&(this.addTimeStamp("IntersectionObserver",n,"paused",0),r.ck.warn(`[Experience Sessions] - âš ï¸ ${s} transition detected with initiator ${i}. Switching to 'paused' state instead.`),!0)}),this.id=e,this.experienceId=t,this.placementId=i,this.location=o,this.endOnSurfaceChange=c,this.observer=l,this.timeline=d,this.elementNode=u,u&&this.initiateObserver(u)}restart(){(0,n.q4)(()=>{this.timeline=[],r.ck.log("[Experience Sessions] - Restarting timeline for experience ",this.id)},"restart",void 0,this.id)}disconnect(){(0,n.q4)(()=>{if(!this.observer)throw new n.ar({placedExperienceId:this.id,customMessage:"disconnect() - Attempted to disconnect observer, but it has not been initiated yet."});this.observer.disconnect(),this.observer=null},"ExperienceInSession.disconnect",void 0,this.id)()}initiateObserver(e){if(e&&!this.observer)this.observer=new IntersectionObserver(this.intersectionTrigger,{root:null,rootMargin:"0px",threshold:.1}),this.elementNode=e,this.observer.observe(e);else{if(e?.isEqualNode(this.elementNode)){this.observer?.observe(e),this.elementNode=e,r.ck.log(`[Experience Sessions] - Resuming experience ${this.id}.`,e);return}r.ck.warn("[Experience Sessions] - Attempted to initiate observer with a null node or an existing observer. Node:",e)}}hasInitiated(){return null!==this.observer&&null!==this.elementNode&&"unknown"!==this.state}addTimeStamp(e,t,i="unknown",s){if(!this.hasInitiated()&&"start"!==i)throw new n.EO({placedExperienceId:this.id});let a=this.getLastTimeStamp()?.state||"unknown";if(!o[a].includes(i)){if(this.handleTransitionEdgeCases(a,i,e,t))return!0;throw new n.iL({placedExperienceId:this.id,currentState:a,newState:i})}return this.timeline.push({time:s||(0,r.dg)(),initiator:e,inView:t,state:i}),this.state=i,this.inView=t,this.lastInitiator=e,"end"===i&&"blur"!==e&&"focus"!==e&&"IntersectionObserver"!==e&&"restart"!==e&&(this.endReason=e),!0}setEndReason(e){this.endReason=e}isInView(){return this.inView}getSessionState(){return this.timeline?.[this.timeline.length-1]?.state??"unknown"}getLastTimeStamp(){return this.timeline.length>0?this.timeline[this.timeline.length-1]:void 0}getTimeStampBeforePause(){for(let e=this.timeline.length-1;e>=0;e-=1){let t=this.timeline[e];if(!t||"active"===t.state||"resumed"===t.state)break;if("paused"===t.state)if(e-1>=0)return this.timeline[e-1];else break}}getStateToResumeTo(){let e=this.getLastTimeStamp();if(e&&"paused"===e.state&&"IntersectionObserver"===e.initiator)return e.inView;let t=this.getTimeStampBeforePause();return void 0===t&&new n.zD({placedExperienceId:this.id}).log(),t?.inView??!1}getState(){return{inView:this.inView,state:this.state,lastInitiator:this.lastInitiator,endReason:this.endReason}}getTimelineDeepCopy(){return this.timeline.map(e=>({...e}))}getId(){return this.id}getExperienceId(){return this.experienceId}getPlacementId(){return this.placementId}getLocation(){return this.location}getEndOnSurfaceChange(){return this.endOnSurfaceChange}getElementNode(){return this.elementNode}getObserver(){return this.observer}getTimeline(){return this.timeline}getLength(){return this.timeline.length}}},108572:function(e,t,i){i.d(t,{$:()=>r,K:()=>n});let n=[{placementId:11,endOnSurfaceChange:!0},{placementId:40001,endOnSurfaceChange:!0},{placementId:29,endOnSurfaceChange:!0},{placementId:12,endOnSurfaceChange:!0},{placementId:1000088,endOnSurfaceChange:!0},{placementId:1000468,endOnSurfaceChange:!0},{placementId:1000168,endOnSurfaceChange:!0},{placementId:1000235,endOnSurfaceChange:!0},{placementId:1000264,endOnSurfaceChange:!0}],r=[506124,506436,504943,505226,505111,505801,507575,502535,500331,506046,506879,507502,505933,506791,502669,506234,505047,505471,505420,506234,505974,505201,502407,505541,506473,506921,502157,502004,506469,506930]},97776:function(e,t,i){i.d(t,{AS:()=>p,D6:()=>h,EO:()=>d,Gw:()=>b,PI:()=>v,VV:()=>f,ar:()=>l,iL:()=>u,jQ:()=>g,q4:()=>E,z0:()=>m,zD:()=>w});var n=i(533363),r=i(211079),s=i(531014),o=i(603316);class a{constructor({name:e,placedExperienceId:t,message:i}){this.name=e,this.placedExperienceId=t,this.message=i}log(){s.ck.warn(`[ExperienceSessions] - Warning: ${this.name} for experience ${this.placedExperienceId} - ${this.message}`,{placedExperienceId:this.placedExperienceId})}}class c extends Error{constructor({name:e,placedExperienceId:t,customMessage:i}){super(i),this.name=e,this.placedExperienceId=t,Object.setPrototypeOf(this,c.prototype)}}class l extends c{constructor({placedExperienceId:e,customMessage:t}){super({customMessage:t??`Error occurred while creating an IntersectionObserver for experience with id ${e}.`,name:"IntersectionObserver",placedExperienceId:e})}}class d extends c{constructor({placedExperienceId:e,customMessage:t}){super({customMessage:t??`Attempted to create a timestamp without an observer for experience with id ${e}.`,name:"TimeStampNoObserver",placedExperienceId:e})}}class u extends c{constructor({placedExperienceId:e,customMessage:t,currentState:i,newState:n}){super({customMessage:t??`Invalid time stamp state transition: ${(0,r.U)(i,n)}.
Dropping time stamp.`,name:"InvalidStateTransition",placedExperienceId:e}),(0,o.nP)("experience_sessions_invalid_state_transition",{sampleRate:1,tags:{placedExperienceId:e,transition:(0,r.U)(i,n)}})}}class h extends c{constructor({placedExperienceId:e,customMessage:t}){super({customMessage:t??`Attempted to remove an experience with id ${e} from an empty session map.`,name:"RemoveOnEmptySessionMap",placedExperienceId:e})}}class p extends c{constructor({placedExperienceId:e,customMessage:t}){super({customMessage:t??`Attempted to remove a non-existent experience with id ${e}.`,name:"RemoveOnMissingExperience",placedExperienceId:e})}}class m extends c{constructor(e,t,i,n){let r=[{value:e,name:"Placed Experience ID"},{value:t,name:"Experience ID"},{value:i,name:"Placement ID"}].filter(e=>!e.value).map(e=>e.name);super({customMessage:r.length>0?`${r.join(" and ")} ${r.length>1?"are":"is"} required for this operation.`:n??"",name:"InvalidIdError",placedExperienceId:e||""})}}class g extends c{constructor({placedExperienceId:e,customMessage:t}){super({customMessage:t??`No start state found in the timeline for experience with id ${e}.`,name:"NoStart",placedExperienceId:e})}}class b extends c{constructor({placedExperienceId:e,customMessage:t}){super({customMessage:t??`Total duration calculated is negative for experience with id ${e}.`,name:"NegativeTotal",placedExperienceId:e})}}class v extends c{constructor({placedExperienceId:e,customMessage:t}){super({customMessage:t??`Timeline ended without an end state for experience with id ${e}.`,name:"NoEnd",placedExperienceId:e})}}class f extends c{constructor({placedExperienceId:e,customMessage:t}){super({customMessage:t??`Total duration calculated is not a valid number for experience with id ${e}.`,name:"InvalidTotal",placedExperienceId:e})}}class w extends a{constructor({placedExperienceId:e,customMessage:t}){super({message:t??`Attempted to resume without a pause timestamp for experience with id ${e}. Was the session started before app focus?`,name:"TimeStampNoPause",placedExperienceId:e})}}let x=[h,p,m,g,b,v,f];function E(e,t,i,r,o){return(...a)=>{try{return e(...a)}catch(e){if(e instanceof Error){let i=(x.some(t=>e instanceof t)?e.placedExperienceId:r)||"0:unknown";s.ck.error(`[Experience Session] - ${t} - ${e.name}:${e.message}`);let[o,a]=i.split(":");(0,n.sW)(t,e.name,a||"0",Number(o))}else{let i=String(e);s.ck.error(`[Experience Session] - ${t} - Error: ${i}`),(0,n.AC)(e,t)}return o&&o(),i}}}},564325:function(e,t,i){i.d(t,{Z:()=>s,r:()=>n});let{Provider:n,get:r}=(0,i(729434).Z)("ExperienceSessionContext"),s=r},873651:function(e,t,i){i.d(t,{Z:()=>r});var n=i(108572);function r(e){let t=e=>{let t=n.K.find(t=>t.placementId===e);return{enableExperienceSession:!!t,endOnSurfaceChange:!!t?.endOnSurfaceChange}};return e?{...t(e),isSessionEnabledPlacement:t}:{enableExperienceSession:void 0,endOnSurfaceChange:void 0,isSessionEnabledPlacement:t}}},894199:function(e,t,i){i.d(t,{GF:()=>g,jQ:()=>x.Z,vG:()=>E,KF:()=>w,NQ:()=>f.Z});var n=i(667294),r=i(581722),s=i(825332),o=i(877956),a=i(97776);let{Provider:c,get:l,useMaybeHook:d}=(0,i(729434).Z)("ExperienceSessionManagerContext");var u=i(531014),h=i(675973),p=i(341742),m=i(785893);function g({children:e}){let t=(0,n.useRef)({}),i=(0,s.TH)(),l=(0,r.I0)(),d=(0,o.$S)(),{checkExperiment:g}=(0,h.Z)(),b=()=>0===Object.values(t.current).length||0===Object.keys(t.current).length,v=e=>{if(e)return t.current[e]},f=(0,n.useCallback)(e=>{let i=e.getId();return t.current[i]=e,u.ck.log(`[Experience Sessions] - Added experience with id ${i} to experiences in session map.
View ExperienceInSession object added: `,t.current[i]),t.current[i]},[]),w=(0,n.useCallback)((e,i="unknown")=>{(0,a.q4)(()=>{if(0===Object.values(t.current).length)throw new a.D6({placedExperienceId:e});if(!t.current[e])throw new a.AS({placedExperienceId:e});t.current[e].addTimeStamp(i,!1,"end"),t.current[e].disconnect(),u.ck.log(`[Experience Session] - Ended experience with id ${e} to experiences in session map with reason '${i}'.
View time stamps for experience: `,t.current[e].getTimeline(),`
Full experience in session object: `,t.current[e]),(0,o.Th)({placedExperienceId:e,experienceId:t.current[e].getExperienceId(),placementId:t.current[e].getPlacementId(),timeline:t.current[e].getTimelineDeepCopy(),endReason:i}),g("web_experience_remove_on_view_end").anyEnabled&&l(d(t.current[e].getPlacementId(),t.current[e].getExperienceId())),delete t.current[e]},"removeExperience",void 0,e)()},[d,l,g]),x=e=>{b()||Object.values(t.current).forEach(e=>{(0,a.q4)(()=>{e.hasInitiated()&&w(e.id,"page-unload")},"endOnPageLeave",void 0,e.id)()})},E=(0,n.useCallback)(()=>{b()||Object.values(t.current).forEach(e=>{(0,a.q4)(()=>{e.getLocation()!==i.pathname&&e.getEndOnSurfaceChange()&&e.hasInitiated()&&w(e.getId(),"surface-exit")},"endOnSurfaceChange",void 0,e.getId())()})},[i,w]),I=()=>{!b()&&(document.activeElement&&"IFRAME"===document.activeElement.tagName&&(u.ck.warn("[Experience Session] - Ignoring pauseOnPageBlur event in iframe"),1)||Object.values(t.current).forEach(e=>{(0,a.q4)(()=>{e.hasInitiated()&&(e.addTimeStamp("blur",!1,"paused"),u.ck.log(`[Experience Session] - Pausing experience ${e.getId()} session.`))},"pauseOnPageBlur",void 0,e.getId())()}))},_=()=>{b()||Object.values(t.current).forEach(e=>{(0,a.q4)(()=>{if(e.hasInitiated())if(e.getTimeline().length<2)new a.zD({placedExperienceId:e.id}).log(),e.restart();else{let t=e.getStateToResumeTo();e.addTimeStamp("focus",t,"resumed"),u.ck.log(`[Experience Session] - Resuming experience ${e.getId()} session from paused state with inView status: ${t}.`)}},"resumeOnPageFocus",void 0,e.getId())()})};(0,n.useEffect)(()=>{E()},[i,E]),(0,p.Z)(()=>(u.ck.log("[Experience Sessions] - âœ¨ Debug enabled!"),window.addEventListener("beforeunload",x),window.addEventListener("blur",I),window.addEventListener("focus",_),()=>{window.removeEventListener("beforeunload",x),window.removeEventListener("blur",I),window.removeEventListener("focus",_)}));let O=(0,n.useMemo)(()=>({experiencesInSession:t.current,getExperience:v,addExperience:f,removeExperience:w}),[t,f,w]);return(0,m.jsx)(c,{value:O,children:e})}var b=i(281098),v=i(211079),f=i(564325);function w({children:e,id:t,experienceId:i,placementId:r,enable:o=!0,endOnSurfaceChange:c=!0}){(0,n.useEffect)(()=>{(0,b.Z)("SessionWrapper","/app/packages/experiences/Framework/Sessions/Components/SessionWrapper.tsx")},[]);let l=d(),u=!o||!l,{getExperience:h,addExperience:p,removeExperience:g}=l||{getExperience:()=>void 0,addExperience:()=>void 0,removeExperience:()=>void 0},w=(0,n.useRef)(h(t)??null),x=(0,n.useRef)(null),E=(0,s.TH)(),I=(0,n.useCallback)(()=>{(0,a.q4)(()=>{if(!u){if(!t||!i||!r)throw new a.z0(t,i,r);w.current||(w.current=new v.Z(t,i,r,E.pathname,c,null,void 0,x.current),p(w.current))}},"startSession",void 0,t)()},[t,i,r,w,p,u,E,c]),_=(0,n.useCallback)(e=>{(0,a.q4)(()=>{if(!u){if(!t||!i||!r)throw new a.z0(t,i,r);w.current?.hasInitiated()&&g(t,e)}},"endView",void 0,t)()},[t,i,r,w,g,u]),O=(0,n.useCallback)(e=>{(0,a.q4)(()=>{u||(w.current?w.current.initiateObserver(e):x.current=e)},"setObserverRef",void 0,t)()},[w,u,t]),S=(0,n.useMemo)(()=>({startSession:I,endSession:_,experienceInView:w.current,setObserverRef:O}),[I,_,w,O]);return(0,m.jsx)(f.r,{value:S,children:e})}var x=i(873651);function E(e,t){let i,n=t.findIndex(e=>"start"===e.state);if(-1===n)throw new a.jQ({placedExperienceId:e});let r=e=>{if(void 0===i)return i=e.inView,!1;let t=i===e.inView;return i=e.inView,t},s=!0,o=0;for(let e of t.slice(n)){let t=e.inView?-e.time:e.time;if("end"===e.state){r(e)||(o+=t),s=!1;break}"resumed"===e.state&&(s=!0),s&&(r(e)||(o+=t),"paused"===e.state&&(s=!1))}if(s)throw new a.PI({placedExperienceId:e});if(o<0)throw new a.Gw({placedExperienceId:e});if("number"!=typeof o||Number.isNaN(o))throw new a.VV({placedExperienceId:e});return o}},533363:function(e,t,i){let n;i.d(t,{$S:()=>w,AC:()=>C,Am:()=>E,Ig:()=>f,N:()=>S,NW:()=>g,Sd:()=>I,Th:()=>k,YX:()=>O,be:()=>x,fO:()=>m,kd:()=>_,pz:()=>b,sW:()=>y,x4:()=>p});var r=i(667294),s=i(575108),o=i(521009),a=i(894199),c=i(97776),l=i(9139),d=i(531014),u=i(686319),h=i(603316);let p=(e,t)=>s.Z.create("UserExperiencePlatformResource",t?{extra_context:e,targeting:t}:{extra_context:e}).callGet(),m=(e,t)=>i=>s.Z.create("UserExperiencePlatformResource",t?{extra_context:e,targeting:t}:{extra_context:e}).callGet().then(e=>e.resource_response?i((0,l.OD)(e.resource_response.data)):void 0),g=e=>t=>s.Z.create("UserExperiencePlatformResource",{extra_context:e,multiExperiencePlatform:!0}).callGet().then(e=>e.resource_response?t((0,l.xF)(e.resource_response.data)):void 0),b=(e,t,i,r,o)=>(a,c)=>{if(t)return Promise.resolve();if(r&&(n=r),1===e.length){let t=e[0],n=c().experiences[t];if(JSON.stringify(n?.extraContext||null)===JSON.stringify(i)||(0,d.E3)(n)&&!(i&&Object.keys(i).length>0))return Promise.resolve()}return s.Z.create("UserExperienceResource",{placement_ids:e,extra_context:i||null,targeting:r}).callGet().then(t=>{if(!t.resource_response)return;let i=t.resource_response.data||{};if(o){let{experiences:t}=c();d.ck.log("[MVC] Post Checks - Checking existing experiences in store"),e.forEach(e=>{let n=t[e];if(n&&0!==n.experience_id){var r;r=i[e],(0,h.nP)("experience_framework.fetch.post_check.failures",{sampleRate:.01,tags:{placement_id:e,experience_in_store:n.experience_id,experience_from_server:r?.experience_id}}),i[e]=n}})}a((0,l.cL)(i))})},v=(e,t,i,r)=>(o,a,c,d=!1,u,h)=>(p,g)=>{let{experiences:b,experiencesMulti:v}=g(),f=null,w=!0;if(d||(f=(w=!!b[o]&&b[o].experience_id===a)?b[o]:Array.isArray(v[o])&&v[o]?.find(e=>e.experience_id===a)),f&&f.experience_id===a||d&&o&&a){let d=s.Z.create(e,{placed_experience_id:`${o}%3A${a}`,extra_context:u??{},targeting:h}),g=w?l.Yb:l.xW;switch(t){case"dismissed":return d.callDelete().then(()=>{p(g(o,a,t)),p(m(void 0,n)),i&&r&&i({event_type:r,object_id_str:a.toString()})});case"completed":return d.callUpdate().then(()=>{!c&&(p(g(o,a,t)),p(m(void 0,n)),i&&r&&i({event_type:r,object_id_str:a.toString()}))});case"viewed":return p(g(o,a,t)),d.callUpdate().then(()=>{1000162===o&&p(m()),i&&r&&i({event_type:r,object_id_str:a.toString()})});case"completedWithoutHomefeed":return d.callUpdate().then(()=>{c||p(g(o,a,t)),i&&r&&i({event_type:r,object_id_str:a.toString()})})}}return Promise.resolve()},f=()=>{let e=(0,o.Z)();return(0,r.useCallback)(v("UserExperienceViewedResource","viewed",e,4503),[e])},w=()=>{let e=(0,o.Z)();return(0,r.useCallback)((t,i,n,r=!1,s,o)=>(n,s)=>{let{experiences:o,experiencesMulti:a}=s(),c=null,u=!0;if(r||(c=(u=!!o[t]&&o[t].experience_id===i)?o[t]:Array.isArray(a[t])&&a[t]?.find(e=>e.experience_id===i)),c&&c.experience_id===i||r&&t&&i){let r=u?l.Yb:l.xW;d.ck.log(`[MVC] View-End - Removing experience ${t}:${i} from store.`),(0,h.nP)("experience_framework.view_end",{tags:{placement_id:t,experience_id:i}}),n(r(t,i,"view-end")),e&&e({event_type:4503,object_id_str:i.toString()})}return Promise.resolve()},[e])},x=()=>{let e=(0,o.Z)();return(0,r.useCallback)(v("UserExperienceCompletedResource","completed",e,6567),[e])},E=()=>{let e=(0,o.Z)();return(0,r.useCallback)(v("UserExperienceResource","dismissed",e,6568),[e])},I=()=>{let e=(0,o.Z)();return(0,r.useCallback)(v("UserExperienceCompletedResource","completedWithoutHomefeed",e,6567),[e])},_=(e,t)=>(i,n)=>{let{experiences:r}=n(),s=r[e];s&&s.triggerable_placed_exps&&s.triggerable_placed_exps.length&&s.triggerable_placed_exps.forEach(i=>{let[,n]=i.split(":"),r=t,o=s?.metadata?.[n];o&&(r={...t,..."object"==typeof o?o:{}}),(0,u.Z)({url:`/v3/experiences/${i.replace(":","%3A")}/trigger/`,method:"PUT",data:r?{extra_context:JSON.stringify(r,null,1)}:{}}).then(()=>{((e,t,i={})=>(0,h.nP)(`${e}.${t}`,{sampleRate:1,tags:i}))("experienceservice","experimentTriggerCall.1",{placement_id:e,experience_id:n})})})},O=e=>(t,i)=>{t(_(e));let{experiences:n}=i();return n[e]},S=(e,t,i,r)=>s=>{i&&(n=i),s(_(e,t)),t&&Object.keys(t).length>0&&s(b([e],!1,t,i,r))},y=async(e,t,i,n)=>{(0,h.nP)("experience_framework.view_duration.error",{sampleRate:1,tags:{func:e,type:t,experience_id:i,placement_id:n}})},C=async(e,t)=>{let i=e instanceof Error?e.message:String(e);(0,h.nP)("experience_framework.view_duration.unknown_error",{sampleRate:1,tags:{function:t,error:i}})},k=e=>{let{placedExperienceId:t,experienceId:i,placementId:n,endReason:r,timeline:s}=e;(0,c.q4)(()=>{let e=(0,a.vG)(t,s);d.ck.log(`[Experience Sessions] âœ¨ Total duration for experience ${t} is ${e}ms - Sending to statsboard with end reason: ${r}`),(0,h.LY)("experience_framework.view_duration",e,{sampleRate:.2,tags:{placement_id:n,experience_id:i,end_reason:r}})},"calculateTotalDuration",void 0,t,()=>{d.ck.error(`[Experience Sessions] âŒ Error calculating total duration for experience ${t} due to previous error`)})()}},877956:function(e,t,i){i.d(t,{kd:()=>n.kd,$S:()=>n.$S,Tl:()=>o,CF:()=>a,Ig:()=>n.Ig,x4:()=>n.x4,be:()=>n.be,N:()=>n.N,Sd:()=>n.Sd,YX:()=>n.YX,NW:()=>n.NW,Am:()=>n.Am,dy:()=>c,fO:()=>n.fO,Th:()=>n.Th,pz:()=>n.pz});var n=i(533363),r=i(575108);let s=(e,t,i,s)=>(o,a)=>c=>{if(o&&o.id){let l=r.Z.create(e,{placed_experience_id:o.id,extra_context:{}});switch(t){case"dismissed":l.callDelete().then(()=>{c((0,n.fO)()),i&&s&&i({event_type:s,object_id_str:o.id.toString()})});break;case"completed":l.callUpdate().then(()=>{a||c((0,n.fO)()),i&&s&&i({event_type:s,object_id_str:o.id.toString()})});break;case"viewed":l.callUpdate().then(()=>{i&&s&&i({event_type:s,object_id_str:o.id.toString()})})}}},o=e=>s("UserExperienceCompletedResource","completed",e,6567),a=s("UserExperienceResource","dismissed"),c=e=>s("UserExperienceViewedResource","viewed",e,4503)},9139:function(e,t,i){i.d(t,{OD:()=>a,Yb:()=>o,cL:()=>c,xF:()=>r,xW:()=>s});var n=i(854237);let r=e=>({type:n.$S,payload:{experiencesMulti:e}}),s=(e,t,i)=>({type:n.V$,payload:{placementId:e,experienceId:t,status:i}}),o=(e,t,i)=>({type:n.iY,payload:{placementId:e,experienceId:t,status:i}}),a=e=>({type:n._4,payload:{experiences:e}}),c=e=>({type:n.mR,payload:{experiences:e}})},531014:function(e,t,i){i.d(t,{dg:()=>x,A0:()=>m,E3:()=>u,wQ:()=>w,MQ:()=>p,ck:()=>E,nR:()=>h,Cv:()=>g});var n=i(667294),r=i(20256),s=i(506662);let o=[11,1000168],a={1:{id:1,route:"/",onRoute:s.HV,placements:[11,1000541,1000503,40001]},13:{id:13,route:"/business/hub/",onRoute:s.h3,placements:[1000168]}};var c=i(510928),l=i(47426),d=i(785893);function u(e){return!!e&&0!==e.type}let h=(e,t,i,n,r,s=!0)=>{let a="existingExperience";return n?u(n)?i&&(a="placementInSurface",!i.placements.includes(e))?{shouldRefresh:!0,refreshReasoning:"placementNotInSurface"}:r?(a="inSSRPlacement",o.includes(e)?{shouldRefresh:!1,refreshReasoning:a}:{shouldRefresh:!0,refreshReasoning:"notAnSSRPlacement"}):!s||(a="placementMounted",t.mountedPlacements[e]||t.registeredAfterActionPlacements[e])?{shouldRefresh:!1,refreshReasoning:a}:{shouldRefresh:!0,refreshReasoning:"placementNotMounted"}:{shouldRefresh:!0,refreshReasoning:"experienceNotRenderable"}:{shouldRefresh:!0,refreshReasoning:"noExistingExperience"}},p=(e,t,i)=>{let n=e[i];return t[i]&&u(n)?n:null};function m(e){return e.display_data?.anchor}function g(e){return Object.values(a).find(t=>t.onRoute?t.onRoute(e):t.route===e.pathname)}let b=/<(\w+)\s*([^>]*)>([^<]*)<\/\1>/gim,v=/(?:href)=["']?([^"'>\s\\]*)["']?/im,f=/(?:target)=["']?([^"'>\s\\]*)["']?/im,w=e=>{let t=function(e){let t=[],i=0;for(let n of Array.from(e.matchAll(b))){if(n.index>i){let r=e.slice(i,n.index);r&&t.push({type:"text",content:r})}let[r,s,o,a]=n;switch(s){case"a":t.push({type:"link",content:a||"",attrs:o||""});break;case"b":t.push({type:"bold",content:a||""});break;default:t.push({type:"text",content:r})}i=n.index+r.length}if(i<e.length){let n=e.slice(i);n&&t.push({type:"text",content:n})}return t}(e);return(0,d.jsx)(r.xv,{inline:!0,children:t.map(({type:e,content:t,attrs:i},s)=>{switch(e){case"text":return(t?.split(`
`)||[]).map((e,i)=>(0,d.jsxs)(n.Fragment,{children:[i>0&&(0,d.jsx)("br",{}),(0,d.jsx)(r.xv,{inline:!0,children:e})]},`${t}-${i}`));case"bold":return(0,d.jsx)(r.xv,{inline:!0,weight:"bold",children:t},`${t}-${s}`);case"link":let o=i?.match(v),a=o&&o.length>1?o[1]:void 0,c=i?.match(f),u=c&&c.length>1?c[1]:void 0;if(!a)return(0,d.jsx)(r.xv,{inline:!0,children:t},`${t}-${s}`);let h=!1;return h=(0,l.Z)({url:a}),(0,d.jsx)(r.rU,{display:"inline",externalLinkIcon:h?"default":"none",href:a,rel:h?"nofollow":"none",target:"_blank"===u?"blank":void 0,children:t},`${a}-${s}`);default:return null}})})},x=()=>"undefined"!=typeof window&&performance&&performance.now?Math.floor(performance.now()):Math.floor(Date.now()),E=(0,c.Z)()&&(0,c.Z)().debug_experience_session?console:{log:(...e)=>{},error:(...e)=>{},warn:(...e)=>{}}},93966:function(e,t,i){i.d(t,{$H:()=>a,$q:()=>x,$u:()=>r,Az:()=>u,Cw:()=>S,D6:()=>d,GZ:()=>O,KN:()=>I,Ke:()=>w,Lo:()=>s,P2:()=>b,TS:()=>_,Wv:()=>E,ZZ:()=>p,g5:()=>m,jC:()=>c,lX:()=>g,oX:()=>v,qG:()=>f,tG:()=>o,yF:()=>n,yc:()=>h,yt:()=>l});let n=236,r=270,s=157.33333333333334,o=175,a=24,c=4,l=8,d=2,u=8,h=2,p=14,m=16,g=16,b=24,v=16,f=-1,w=2,x=(e=!1,t=!1)=>e?t?g:12:b,E=({defaultItemWidth:e,contentVisibleItemCount:t,gap:i,moduleWidth:n})=>t||n?(n-((Math.ceil(t)+1)*i+8))/t:e,I=(e,t,i,n,r=p)=>{let s=e+r;return`
@media (min-width: ${t*s}px) and (max-width: ${(i+1)*s-1}px) {
  ${n}
}
`},_=(e,t,i)=>{let r=i?3:2,s=t?5:r,a=t?n:o,c=t?v:l,d=a*s+c*s-(t||!t&&i?12:6);if(!e)return d;for(let t=s;t>=2;t-=1)if(e>d)break;else d=a*t+c*t;return d};function O(e){let t=Object.values(e.videos?.video_list??{}).find(e=>"number"==typeof e.width&&"number"==typeof e.height);return t?{width:t.width,height:t.height}:{width:0,height:0}}function S(e){return!!(e&&"is_premiere"in e&&e.is_premiere&&"videos"in e&&e.videos)}},809295:function(e,t,i){function n(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,{Z3:()=>u,ZP:()=>p,LU:()=>h});let r=window.location.search.includes("debug_impressions=1")||document.cookie&&document.cookie.indexOf("debug_impressions=1")>-1,s={paused:"Pause",resumed:"Resume",stopped:"Flush",enter:"Enter viewport",exit:"Exit viewport"},o={},a={background:"#FF8A8A",transform:"scale(.98)"},c={init:e=>({transform:`scale(${o[e]?.8:.99})`,transition:"transform .2s ease-in-out",background:"#8E8E8E"}),[s.enter]:{background:"#A0DCC8",transform:"scale(.99)"},[s.exit]:a,[s.stopped]:a,[s.paused]:a,[s.resumed]:{background:"#0FA573",transform:"scale(.99)"}};class l{constructor(e){n(this,"lastIntersectionChange",null),n(this,"setMutationObserver",e=>(this.mutationObserver=e,this)),n(this,"startMutationObserver",e=>{this.mutationObserver&&this.mutationObserver.observe(this.node,e)}),n(this,"stopMutationObserver",()=>{this.mutationObserver&&this.mutationObserver.disconnect()}),n(this,"handleIntersectionVisibilityChange",(e,t)=>{this.lastIntersectionChange=e,[{type:1,isVisible:e=>{let t=e.rootBounds?.bottom??window.innerHeight;return e.isIntersecting&&e.boundingClientRect.top>=143&&e.boundingClientRect.top<t},isHidden:e=>{let t=e.rootBounds?.bottom??window.innerHeight;return!e.isIntersecting||e.boundingClientRect.top<143||e.boundingClientRect.top>=t}},{type:50,isVisible:e=>e.intersectionRatio>=.5,isHidden:e=>e.intersectionRatio<.5},{type:80,isVisible:e=>e.intersectionRatio>=.8,isHidden:e=>e.intersectionRatio<.8},{type:2,isVisible:e=>{let t=e.rootBounds?.bottom??window.innerHeight;return e.isIntersecting&&e.boundingClientRect.bottom<=t&&e.boundingClientRect.bottom>=143},isHidden:e=>{let t=e.rootBounds?.bottom??window.innerHeight;return!e.isIntersecting||e.boundingClientRect.bottom<143||e.boundingClientRect.bottom>t}}].forEach(({type:i,isVisible:n,isHidden:r})=>{n(e)?this.lastLoggedVisibleEvent[i]||(this.addVisibleEvent(i,t),this.lastLoggedVisibleEvent[i]=!0):r(e)&&this.lastLoggedVisibleEvent[i]&&(this.addHiddenEvent(i,t),this.lastLoggedVisibleEvent[i]=!1)})}),n(this,"handleIntersectionChange",e=>{let t=e.intersectionRatio>0||e.isIntersecting,i=Date.now();this.handleIntersectionVisibilityChange(e,i),t&&!this.inViewport?(this.startTime=i,this.pinCellWidth=this.node.offsetWidth,this.pinCellHeight=this.node.offsetHeight,this._debug(s.enter,{startTime:i,node:this.node}),this.enterCallbacks.forEach(e=>e())):!t&&this.inViewport&&(this._debug(s.exit,!0),this.exitCallbacks.forEach(e=>e(this.toJSON()))),this.inViewport=t}),this.enterCallbacks=[],this.exitCallbacks=[],this.inViewport=!1,this.node=e,this.startTime=0,this.debugId="",this.pinCellWidth=0,this.pinCellHeight=0,this.visibleEvents=new Map,this.hiddenEvents=new Map,this.lastLoggedVisibleEvent={1:!1,50:!1,80:!1,2:!1}}addVisibleEvent(e,t){let i=this.visibleEvents.get(e)||[];i.push(1e6*t),this.visibleEvents.set(e,i)}addHiddenEvent(e,t){let i=this.hiddenEvents.get(e)||[];i.push(1e6*t),this.hiddenEvents.set(e,i)}hasVisibleEvent(e){return this.visibleEvents.has(e)}hasHiddenEvent(e){return this.hiddenEvents.has(e)}onEnterViewport(e){return this.enterCallbacks.push(e),this}onExitViewport(e){return this.exitCallbacks.push(e),this}setDebugId(e){return this.debugId=e,r&&Object.assign(this.node.style,c.init(e)),this}pause(){return this.inViewport&&(this.addHiddenEvent(102,Date.now()),this._debug(s.paused,!0),this.exitCallbacks.forEach(e=>e(this.toJSON()))),this}resume(){if(this.inViewport){let e=Date.now();this._debug(s.resumed,{startTime:e}),this.startTime=e,this.addVisibleEvent(102,e),Object.keys(this.lastLoggedVisibleEvent).forEach(e=>{this.lastLoggedVisibleEvent[e]=!1}),this.lastIntersectionChange&&this.handleIntersectionVisibilityChange(this.lastIntersectionChange,e)}return this}stop(e){return this.inViewport&&(this._debug(s.stopped,!0),this.exitCallbacks.forEach(t=>t(this.toJSON(e)))),this}toJSON(e=""){return{startTime:1e6*this.startTime,endTime:1e6*Date.now(),forcedExit:e,pinCellWidth:this.pinCellWidth,pinCellHeight:this.pinCellHeight,visibleEvents:this.visibleEvents,hiddenEvents:this.hiddenEvents}}toDebugJSON(){return{pinID:this.debugId,startTime:this.startTime,endTime:Date.now(),duration:`${(Date.now()-this.startTime)/1e3} seconds`,pinCellWidth:this.pinCellWidth,pinCellHeight:this.pinCellHeight}}_debug(e,t){if(r)switch(window.console.log(`ðŸ“Œ ${e} -- ${this.debugId}`),!0===t&&window.console.log(this.toDebugJSON()),"object"==typeof t&&window.console.log(t),c[e]&&Object.assign(this.node.style,c[e]),e){case s.flushed:case s.paused:case s.exit:o[this.debugId]=!0}}}function d(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let u=!0,h=!1;class p{constructor(){d(this,"_delegateChange",e=>{e.forEach(e=>{let t=this.activeImpressions.get(e.target);t&&t.handleIntersectionChange(e)})}),d(this,"_handleMutations",(e,t)=>{let i=this.mutationObservers.get(t);i&&i.offsetHeight<1&&i&&this.stop(i,"removed")}),this.activeImpressions=new Map,this.mutationObservers=new Map,this.bottomHeight=0,this.bottomObstructions=new Set,this.pausePriority=h,this.observer=new window.IntersectionObserver(this._delegateChange),window.Cypress&&!window.activeImpressions&&(window.activeImpressions=new Map),this.paused=!1,this.topHeight=0,this.topObstructions=new Set,this.inExperiment=!1}setExperimentStatus(e){this.inExperiment!==e&&(this.inExperiment=e)}stop(e,t=""){let i=this.activeImpressions.get(e);i&&(i.stop(t),i.mutationObserver&&this.mutationObservers.delete(i.mutationObserver),i.stopMutationObserver(),this.activeImpressions.delete(e),window.activeImpressions?.delete(e),this.observer?.unobserve(e))}start(e){let t=this.activeImpressions.get(e);if(!t){t=new l(e),this.activeImpressions.set(e,t),window.activeImpressions?.set(e,t),this.observer?.observe(e);let i=(e,t)=>this._handleMutations(e,t);t.setMutationObserver(new window.MutationObserver(i)),t.mutationObserver&&this.mutationObservers.set(t.mutationObserver,e),t.startMutationObserver({subtree:!0,attributes:!0,attributeFilter:["style"]})}return t}pause(e=u){this.paused||(Array.from(this.activeImpressions.values()).forEach(e=>e.pause()),this.paused=!0,this.pausePriority===h&&(this.pausePriority=e))}resume(e=u){(e!==h||this.pausePriority!==u)&&this.paused&&(Array.from(this.activeImpressions.values()).forEach(e=>e.resume()),this.paused=!1,this.pausePriority=h)}addObstruction(e,t){"top"===e?this.topObstructions.add(t):"bottom"===e&&this.bottomObstructions.add(t),this._calculateRootMargins()}removeObstruction(e,t){"top"===e?this.topObstructions.delete(t):"bottom"===e&&this.bottomObstructions.delete(t),this._calculateRootMargins()}updateObstructions(){this._calculateRootMargins()}_calculateRootMargins(){let e=Array.from(this.topObstructions).reduce((e,t)=>{let{bottom:i}=t.getBoundingClientRect();return i>e?i:e},0),t=window.innerHeight-Array.from(this.bottomObstructions).reduce((e,t)=>{let{top:i}=t.getBoundingClientRect();return i<e?i:e},window.innerHeight);if(e!==this.topHeight||t!==this.bottomHeight){let i={rootMargin:`${-e}px 0px ${-t}px`,threshold:[0,.5,.8,1]};this.observer?.disconnect(),this.observer=new window.IntersectionObserver(this._delegateChange,i),Array.from(this.activeImpressions.values()).forEach(e=>this.observer?.observe(e.node)),this.topHeight=e,this.bottomHeight=t}}}},816358:function(e,t,i){i.d(t,{Z:()=>n});let n=new(i(809295)).ZP},600861:function(e,t,i){i.d(t,{i:()=>n});let n={REGISTRATION:"registration",SETTINGS:"settings",GOOGLE_PEOPLE_API:"google_people_api",HOLISTIC_PROFILE_PROMPT:"holistic_profile_prompt",IN_APP_BIRTHDAY_PROMPT:"in_app_birthday_prompt",FIX_EMAIL_PROMPT:"fix_email_prompt",NUX:"nux",BUSINESS_HUB:"business_hub",UNKNOWN:"unknown"}},47426:function(e,t,i){i.d(t,{Z:()=>r});var n=i(233624);let r=({url:e})=>!!(e&&e.match(/^https{0,1}:\/\//)&&!(0,n.Z)(e))}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/41642-51c89305a2e109e1.mjs.map